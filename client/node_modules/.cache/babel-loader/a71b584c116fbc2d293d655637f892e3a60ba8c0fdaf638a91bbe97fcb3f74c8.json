{"ast":null,"code":"import React,{useState}from\"react\";import api from\"../config/api\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var[name,setName]=useState('');var[email,setEmail]=useState('');var[password,setpassword]=useState('');var[passwordConfirm,setpasswordConfirm]=useState('');var[errorMessage,setErrorMessage]=useState('');var[isRegistering,setIsRegistering]=useState(false);const navigate=useNavigate();function validationErrors(){errorMessage='';var errorBuffer='';if(password.length<4){errorBuffer+=\"*Password must have at least 4 characters\";}if(password!==passwordConfirm){errorBuffer+=\"*Passwords don't match \";}const emailRegex=/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;if(!emailRegex.test(email)){errorBuffer+=\" *Invalid email\";}setErrorMessage(errorBuffer);return errorBuffer;}const Register=e=>{e.preventDefault();if(validationErrors().length===0){setIsRegistering(true);api.post(\"/register\",{email:email,userName:name,password:password,withCredentials:true}).then(response=>{setIsRegistering(false);if(response&&response.status===200){navigate(\"/login\");}}).catch(err=>{setIsRegistering(false);// document.write(\"the error:   \",err);\nif(err.response.status===400){// document.write(err)\nsetErrorMessage(err.response.data.errors);}});}};return/*#__PURE__*/_jsx(\"div\",{id:\"register-page\",className:\"d-flex flex-column justify-content-center \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex flex-column bg-white justify-content-center align-items-center\",id:\"register-form\",style:{},children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mb-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"\",src:require(\"../logos/logo.png\"),style:{width:\"78%\"},alt:\"\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:Register,method:\"post\",className:\"d-flex flex-column gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"col-12\",type:\"text\",placeholder:\"User name\",onChange:e=>setName(e.target.value),value:name,required:true// <% if(typeof enteredName !='undefined'){%>value=\"<%=enteredName %>\"<%}%> \n}),/*#__PURE__*/_jsx(\"input\",{className:\"col-12\",type:\"text\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true// <% if(typeof enteredEmail !='undefined'){%>value=\"<%=enteredEmail %>\"<%}%>\n}),/*#__PURE__*/_jsx(\"input\",{className:\"col-12\",type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setpassword(e.target.value),required:true// <% if(typeof enteredpassword !='undefined'){%>value=\"<%=enteredpassword %>\"<%}%>\n}),/*#__PURE__*/_jsx(\"input\",{className:\"col-12\",type:\"password\",placeholder:\"Confirm Password\",value:passwordConfirm,onChange:e=>setpasswordConfirm(e.target.value),required:true// <% if(typeof enteredpasswordConfirm !='undefined'){%>value=\"<%=enteredpasswordConfirm %>\"<%}%>\n}),/*#__PURE__*/_jsx(\"div\",{style:{},children:/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:errorMessage})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"col-12 btn-submit\",children:isRegistering?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-white\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Validating...\"})}):/*#__PURE__*/_jsx(\"span\",{children:\"Register\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 \",children:[\"Have an account?\",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",style:{},children:\"Login\"})]})})]})]})]})});}","map":{"version":3,"names":["React","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","name","setName","email","setEmail","password","setpassword","passwordConfirm","setpasswordConfirm","errorMessage","setErrorMessage","isRegistering","setIsRegistering","navigate","validationErrors","errorBuffer","length","emailRegex","test","e","preventDefault","post","userName","withCredentials","then","response","status","catch","err","data","errors","id","className","children","style","src","require","width","alt","onSubmit","method","type","placeholder","onChange","target","value","required","color","href"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/register.jsx"],"sourcesContent":["import React,{useState} from \"react\";\nimport api from \"../config/api\";\nimport {useNavigate} from \"react-router-dom\";\n\nexport default function Register(){\n    var [name,setName]=useState('');\n    var [email,setEmail]=useState('');\n    var [password,setpassword]=useState('');\n    var [passwordConfirm,setpasswordConfirm]=useState('');\n    var [errorMessage,setErrorMessage]=useState('');\n    var [isRegistering, setIsRegistering] = useState(false);\n\n    const navigate=useNavigate();\n\n\n    function validationErrors(){\n        errorMessage='';\n        var errorBuffer='';\n\n        if(password.length<4){\n            errorBuffer+= \"*Password must have at least 4 characters\";\n\n        }\n        if(password!==passwordConfirm){\n            errorBuffer+= \"*Passwords don't match \";\n         }\n\n        const emailRegex=/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n        if(!emailRegex.test(email)){\n            errorBuffer+= \" *Invalid email\"\n        }\n       \n        setErrorMessage(errorBuffer);\n        return errorBuffer;\n    }\n\n    const Register=(e)=>{\n        e.preventDefault();\n        if(validationErrors().length===0){\n            setIsRegistering(true);\n\n                api.post(\"/register\",\n                    {\n                        email:email,\n                        userName:name,\n                        password:password,\n                        withCredentials:true\n                    }\n                    ).then((response)=>{\n                            setIsRegistering(false);\n                            if(response && response.status===200){\n                                navigate(\"/login\");\n                            }\n                    })\n                .catch((err)=>{\n                    setIsRegistering(false);\n                // document.write(\"the error:   \",err);\n\n                if(err.response.status===400){\n                    // document.write(err)\n                    setErrorMessage(err.response.data.errors);\n\n                    \n                }\n                });\n        }\n       \n    }\n\n    return(\n    <div id=\"register-page\" className=\"d-flex flex-column justify-content-center \">\n        <div className=\"container d-flex flex-column bg-white justify-content-center align-items-center\" \n            id=\"register-form\"\n            style={{}}>\n            <div className=\"d-flex justify-content-center mb-4\">\n                <img className=\"\" src={require(\"../logos/logo.png\")} style={{width:\"78%\"}} alt=\"\"/>\n            </div> \n\n            <form onSubmit={Register} method=\"post\" className=\"d-flex flex-column gap-2\">\n               \n                    <input className=\"col-12\" type=\"text\" placeholder=\"User name\" onChange={(e)=>setName(e.target.value)} value={name} required\n                        // <% if(typeof enteredName !='undefined'){%>value=\"<%=enteredName %>\"<%}%> \n                        />\n\n               \n               \n                    <input  className=\"col-12\" type=\"text\" placeholder=\"Email\" value={email} onChange={(e)=>setEmail(e.target.value)} required\n                        // <% if(typeof enteredEmail !='undefined'){%>value=\"<%=enteredEmail %>\"<%}%>\n                        />\n\n\n               \n               \n                    <input className=\"col-12\" type=\"password\" placeholder=\"Password\" value={password} onChange={(e)=>setpassword(e.target.value)} required\n                        // <% if(typeof enteredpassword !='undefined'){%>value=\"<%=enteredpassword %>\"<%}%>\n                        />\n\n               \n                    <input className=\"col-12\" type=\"password\" placeholder=\"Confirm Password\" value={passwordConfirm} onChange={(e)=>setpasswordConfirm(e.target.value)} required\n                        // <% if(typeof enteredpasswordConfirm !='undefined'){%>value=\"<%=enteredpasswordConfirm %>\"<%}%>\n                        />\n\n                \n                    <div style={{}}>\n                        <p style={{color:\"red\"}}>{errorMessage}</p>\n                    </div>\n                \n                    <div className=\"d-flex flex-column\">\n                        <button type=\"submit\" className=\"col-12 btn-submit\">\n                            {isRegistering\n                                ?<div className=\"spinner-border text-white\">\n                                    <span className=\"sr-only\">Validating...</span>\n                                </div>\n                                :<span>Register</span>\n                            }\n\n                        </button>\n                       <div className=\"col-12 d-flex justify-content-center\">\n                        <p className=\"mt-3 \">\n                                Have an account?\n                                <a href=\"/login\" style={{}}>Login</a>\n                            </p>\n                        </div>\n                    </div>\n            </form>\n        </div>\n    </div>\n\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}