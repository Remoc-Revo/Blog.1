{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faUser,faSearch,faTimes}from\"@fortawesome/free-solid-svg-icons\";import api from\"../config/api\";import moment from\"moment\";import SessionEndedModal from\"../reusables/sessionEndedModal\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function AdminUsersDisplay(){const[allUsers,setAllUsers]=useState([]);const[displayedUsers,setDisplayedUsers]=useState([]);const[searchedText,setSearchedText]=useState('');const[isSearchInputActive,setIsSearchInputActive]=useState(false);const[isLoading,setIsLoading]=useState(false);const[showSessionEndedModal,setShowSessionEndedModal]=useState(false);const navigate=useNavigate();useEffect(()=>{setIsLoading(true);api.get('/users').then(response=>{console.log(\"fetched users\",response.data.users);setAllUsers(response.data.users);setDisplayedUsers(response.data.users);setIsLoading(false);}).catch(e=>{setIsLoading(false);console.log(\"Error fetching users: \",e);if(e.response.status===401){navigate('/');setShowSessionEndedModal(true);}});},[]);function handleSearch(e){const text=e.target.value.toLowerCase();setSearchedText(text);const filteredUsers=allUsers.filter(user=>{const userName=user.userName.toLowerCase();const userEmail=user.userEmail.toLowerCase();if(userName.includes(text)||userEmail.includes(text)){return user;}return null;});setDisplayedUsers(filteredUsers);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container col-lg-7 col-md-9\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"mb-5\",children:[\"All Users \",allUsers.length!==0&&\"(\".concat(allUsers.length,\")\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex  mb-4 \",id:\"users-search\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 position-relative d-flex justify-content-between border\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn rounded-0\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn position-absolute start-0 top-0 h-100\"// onClick={}\n,style:{zIndex:\"2\",color:\"grey\"},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSearch})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"position-absolute w-100  ps-5 pe-5 start-0 top-0 h-100 border-0\",placeholder:\" Search user name or email...\",onClick:()=>{setIsSearchInputActive(true);},onChange:handleSearch,value:searchedText,style:{zIndex:\"1\"}}),isSearchInputActive&&/*#__PURE__*/_jsx(\"button\",{className:\"btn position-absolute end-0 top-0 h-100\",onClick:()=>{setIsSearchInputActive(false);setSearchedText('');setDisplayedUsers(allUsers);},style:{zIndex:\"1\"},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes,className:\"ic-grey\"})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-success \",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})})}),/*#__PURE__*/_jsx(\"table\",{className:\"w-100 \",children:displayedUsers.map(user=>/*#__PURE__*/_jsx(\"tr\",{className:\"\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" d-flex gap-4 ms-4 me-4 pt-2 align-items-start\",style:{height:\"100px\"},children:[user.photoUrl!==null?/*#__PURE__*/_jsx(\"div\",{style:{width:\"70px\",height:\"70px\"},children:/*#__PURE__*/_jsx(\"img\",{src:user.photoUrl,className:\"rounded-circle w-100 h-100 object-fit-cover\",alt:\"\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle overflow-hidden\",style:{width:\"70px\",height:\"70px\",backgroundColor:\"lightgrey\"},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser,className:\"ic-white rounded-circle w-100 h-100 pt-2\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"\",style:{fontWeight:\"500\"},children:user.userName}),/*#__PURE__*/_jsx(\"span\",{className:\"d-block\",style:{fontWeight:\"300\"},children:user.userEmail}),user.userLevel===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",children:[/*#__PURE__*/_jsx(\"span\",{style:{color:\"teal\"},children:\"Registered\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"fw-light\",children:[\" \",moment(user.userRegistrationDate).fromNow()]})]}),user.userLevel===1&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{style:{color:\"orange\"},children:\"Admin\"})})]})]})}))})]}),/*#__PURE__*/_jsx(SessionEndedModal,{showSessionEndedModal:showSessionEndedModal,setShowSessionEndedModal:setShowSessionEndedModal})]});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","FontAwesomeIcon","faUser","faSearch","faTimes","api","moment","SessionEndedModal","jsxs","_jsxs","jsx","_jsx","AdminUsersDisplay","allUsers","setAllUsers","displayedUsers","setDisplayedUsers","searchedText","setSearchedText","isSearchInputActive","setIsSearchInputActive","isLoading","setIsLoading","showSessionEndedModal","setShowSessionEndedModal","navigate","get","then","response","console","log","data","users","catch","e","status","handleSearch","text","target","value","toLowerCase","filteredUsers","filter","user","userName","userEmail","includes","className","children","length","concat","id","icon","style","zIndex","color","type","placeholder","onClick","onChange","map","height","photoUrl","width","src","alt","backgroundColor","fontWeight","userLevel","userRegistrationDate","fromNow"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/adminUsersDisplay.jsx"],"sourcesContent":["\nimport React,{useState,useEffect} from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUser,faSearch,faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport api from \"../config/api\";\nimport moment from \"moment\";\nimport SessionEndedModal from \"../reusables/sessionEndedModal\";\n\nexport default function AdminUsersDisplay(){\n    const [allUsers, setAllUsers] = useState([]);\n    const [displayedUsers, setDisplayedUsers] = useState([])\n    const [searchedText, setSearchedText] = useState('');\n    const [isSearchInputActive, setIsSearchInputActive] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [showSessionEndedModal, setShowSessionEndedModal] = useState(false);\n    const navigate = useNavigate();\n\n    useEffect(()=>{\n        setIsLoading(true);\n        api.get('/users',)\n            .then((response)=>{\n                console.log(\"fetched users\",response.data.users);\n                setAllUsers(response.data.users)\n                setDisplayedUsers(response.data.users)\n                setIsLoading(false)\n            })\n            .catch((e)=>{\n                setIsLoading(false);\n                console.log(\"Error fetching users: \",e);\n                if(e.response.status === 401){\n                    navigate('/');\n                    setShowSessionEndedModal(true);\n                }\n            })\n    },[])\n\n\n    function handleSearch(e){\n        const text = e.target.value.toLowerCase();\n        setSearchedText(text);     \n\n        const filteredUsers = allUsers.filter(\n            user => \n                {\n                    const userName = user.userName.toLowerCase();\n                    const userEmail = user.userEmail.toLowerCase();\n                    \n                    if(userName.includes(text) || userEmail.includes(text)){            \n                        return user;\n                    }\n\n                    return null;\n                 }\n        )\n\n        setDisplayedUsers(filteredUsers);\n    }\n\n\n\n    return <div className=\"container col-lg-7 col-md-9\">\n\n        <h3 className=\"mb-5\">All Users {allUsers.length !== 0 && `(${allUsers.length})`}</h3>\n        <div className=\"d-flex  mb-4 \" id=\"users-search\">\n            <div className=\"col-12 position-relative d-flex justify-content-between border\" >                \n                <button className=\"btn rounded-0\">\n                    <FontAwesomeIcon icon={faSearch}/>\n                </button>                \n                \n                <div className=\"\">\n                    <button className=\"btn position-absolute start-0 top-0 h-100\"\n                        // onClick={}\n                        style={{zIndex:\"2\",color:\"grey\"}}>\n                        <FontAwesomeIcon icon={faSearch}/>\n                    </button>\n                    <input \n                        type=\"text\"\n                        className=\"position-absolute w-100  ps-5 pe-5 start-0 top-0 h-100 border-0\"\n                        placeholder=\" Search user name or email...\"\n                        onClick={()=>{setIsSearchInputActive(true)}}\n                        onChange={handleSearch}\n                        value={searchedText}\n                        style={{zIndex:\"1\"}}\n                        />\n                    \n                { isSearchInputActive \n                    &&<button className=\"btn position-absolute end-0 top-0 h-100\"\n                        onClick={()=>{\n                            setIsSearchInputActive(false);\n                            setSearchedText('')\n                            setDisplayedUsers(allUsers);\n                        }}\n                        style={{zIndex:\"1\"}}>\n                        <FontAwesomeIcon icon={faTimes} className=\"ic-grey\"/>\n                    </button>}\n                </div>\n                    \n                \n            </div>\n                \n            </div>\n\n            <div>\n            {\n                isLoading &&\n                <div className=\"d-flex justify-content-center\">\n                    <div className=\"spinner-border text-success \">\n                        <span className=\"sr-only\">Loading...</span>\n                    </div>\n                </div>\n            }\n            <table className=\"w-100 \" >\n                {\n                    displayedUsers.map(\n                        user=><tr className=\"\" >\n                            <div className=\" d-flex gap-4 ms-4 me-4 pt-2 align-items-start\" style={{height:\"100px\"}}>\n                            {\n                                    (user.photoUrl !== null)\n                                    ?<div style={{width:\"70px\",height:\"70px\"}}>                                                                                           \n                                        <img src={user.photoUrl}\n                                            className=\"rounded-circle w-100 h-100 object-fit-cover\"\n                                            alt=\"\"\n                                        />\n                                    </div>\n\n                                    :<div className=\"rounded-circle overflow-hidden\" \n                                        style={{width:\"70px\",height:\"70px\", backgroundColor:\"lightgrey\"}}>\n                                        <FontAwesomeIcon icon={faUser} className=\"ic-white rounded-circle w-100 h-100 pt-2\"/>\n                                    </div>\n                                }\n                                <div>\n                                    <span className=\"\" style={{fontWeight:\"500\"}}>{user.userName}</span>\n                                    <span className=\"d-block\" style={{fontWeight:\"300\"}}>{user.userEmail}</span>\n\n                                    {\n                                        user.userLevel === 0 &&\n                                        (<div className=\"mt-1\">\n                                            <span style={{color:\"teal\"}}>Registered</span>\n                                            <span className=\"fw-light\"> {moment(user.userRegistrationDate).fromNow()}</span>\n                                        </div>)                                        \n                                    }\n                                    {     user.userLevel === 1 &&\n                                        (<div>\n                                            <span style={{color:\"orange\"}}>Admin</span>\n                                        </div>)\n                                    }\n                                </div>\n                            </div>\n                            \n                                \n                        </tr>\n                    )\n                }\n            </table>\n        </div>\n                <SessionEndedModal showSessionEndedModal={showSessionEndedModal} setShowSessionEndedModal={setShowSessionEndedModal}/>\n\n\n    </div>\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}