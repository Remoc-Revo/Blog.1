{"ast":null,"code":"import parser from \"html-react-parser\";\nimport { v4 as uuidv4 } from 'uuid';\nimport api from \"../config/api\";\nexport function decodeString(str) {\n  return parser(decodeURIComponent(str).replace(/&apos;/g, \"'\").replace(/<p>/g, \"\").replace(/<\\/p>/g, \"\"));\n}\nexport function updateHistory(path) {\n  if (path === \"\") {\n    window.history.pushState({}, '', \"/\");\n  } else {\n    window.history.pushState({}, '', path);\n  }\n}\nconst getVisitorId = () => {\n  let visitorId = localStorage.getItem(\"visitorId\");\n  if (!visitorId) {\n    visitorId = uuidv4();\n    localStorage.setItem(\"visitorId\", visitorId);\n  }\n  return visitorId;\n};\nexport async function logVisitor(path) {\n  const visitorId = getVisitorId();\n  try {\n    api.post('/visitor', {\n      path,\n      visitorId\n    });\n  } catch (e) {\n    console.log(\"Error logging visitor\");\n  }\n}\n;\nexport async function uploadImageToCloud(imageSrc) {\n  if (imageSrc === null) {\n    return null;\n  }\n  var formData = new FormData();\n  formData.append('file', imageSrc);\n  formData.append('upload_preset', process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);\n  console.log(\"the file\", formData);\n  try {\n    const res = await fetch(`https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_CLOUD__NAME}/image/upload/`, {\n      method: \"post\",\n      body: formData\n    });\n    if (res.ok) {\n      let data;\n      data = await res.json();\n      if (data !== undefined) {\n        console.log(\"\\n secure_url\", data.secure_url);\n        return data.secure_url;\n      }\n    }\n  } catch (err) {\n    console.log(\"file upload err\", err);\n  }\n}\nexport function formatDateTime(date) {\n  date = new Date(date);\n  let hours = date.getHours();\n  let minutes = date.getMinutes();\n  const ampm = hours > 12 ? 'pm' : 'am';\n  hours = hours % 12;\n  hours = hours ? hours : 12; //convert hour '0' to 12\n  minutes = minutes < 10 ? '0' + minutes : minutes;\n  const timeStr = hours + ':' + minutes + ' ' + ampm;\n  const dateStr = new Intl.DateTimeFormat('en-US', {\n    month: 'long',\n    day: 'numeric',\n    year: 'numeric'\n  }).format(date);\n  const dateTimeStr = dateStr + ' at ' + timeStr;\n  return dateTimeStr;\n}\nexport function getWindowWidth() {\n  if (typeof window !== 'undefined') {\n    return window.innerWidth;\n  }\n  return 0;\n}\n;","map":{"version":3,"names":["parser","v4","uuidv4","api","decodeString","str","decodeURIComponent","replace","updateHistory","path","window","history","pushState","getVisitorId","visitorId","localStorage","getItem","setItem","logVisitor","post","e","console","log","uploadImageToCloud","imageSrc","formData","FormData","append","process","env","REACT_APP_CLOUDINARY_UPLOAD_PRESET","res","fetch","REACT_APP_CLOUDINARY_CLOUD__NAME","method","body","ok","data","json","undefined","secure_url","err","formatDateTime","date","Date","hours","getHours","minutes","getMinutes","ampm","timeStr","dateStr","Intl","DateTimeFormat","month","day","year","format","dateTimeStr","getWindowWidth","innerWidth"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/reusables/global.js"],"sourcesContent":["import parser from \"html-react-parser\";\nimport {v4 as uuidv4} from 'uuid'\nimport api from \"../config/api\";\n\nexport function decodeString(str){\n    return parser(decodeURIComponent(str)\n            .replace(/&apos;/g,\"'\")\n            .replace(/<p>/g,\"\")\n            .replace(/<\\/p>/g,\"\"))\n}\n\nexport function updateHistory(path){\n    if(path===\"\"){\n        window.history.pushState({},'',\"/\")\n    }\n    else{\n        window.history.pushState({},'',path)\n    }\n}\n\n\nconst getVisitorId = ()=>{\n    let visitorId = localStorage.getItem(\"visitorId\");\n    if(!visitorId){\n        visitorId = uuidv4();\n        localStorage.setItem(\"visitorId\",visitorId);\n    }\n\n    return visitorId;\n};\n\nexport async function logVisitor(path){\n    const visitorId = getVisitorId();\n    try{\n        api.post('/visitor',{path,visitorId});\n    }\n    catch(e){\n        console.log(\"Error logging visitor\");\n    }\n};\n\n\n\nexport async function uploadImageToCloud(imageSrc){\n    if(imageSrc===null){\n        return null;\n    }\n    var formData=new FormData();\n\n    formData.append('file',imageSrc);\n    formData.append('upload_preset',process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);\n    console.log(\"the file\",formData)\n\n    try{\n        const res=await fetch(\n            `https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_CLOUD__NAME}/image/upload/`,\n                    {\n                        method:\"post\",\n                        body:formData\n                    }\n            )\n        if(res.ok){\n            let data;\n            data  = await res.json()\n            if(data!== undefined){\n               \n                console.log(\"\\n secure_url\",data.secure_url)\n                return data.secure_url\n            }\n        }   \n       \n    }catch(err){\n        console.log(\"file upload err\",err);\n    }\n}\n\n\nexport function formatDateTime(date){\n    date = new Date(date);\n    let hours = date.getHours();\n    let minutes = date.getMinutes();\n    const ampm = hours > 12 ? 'pm' : 'am';\n    hours = hours % 12;\n    hours = hours ? hours : 12; //convert hour '0' to 12\n    minutes = minutes <  10 ? '0' + minutes : minutes;\n\n    const timeStr = hours + ':' + minutes + ' ' + ampm;\n    const dateStr =   new Intl.DateTimeFormat('en-US',{month:'long',day:'numeric',year:'numeric'}).format(date);\n    const dateTimeStr = dateStr + ' at ' + timeStr;\n\n\n    return dateTimeStr;\n\n  }\n\n\n  export function getWindowWidth () {\n    if (typeof window !== 'undefined') {\n      return window.innerWidth;\n    }\n    return 0;\n  };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}