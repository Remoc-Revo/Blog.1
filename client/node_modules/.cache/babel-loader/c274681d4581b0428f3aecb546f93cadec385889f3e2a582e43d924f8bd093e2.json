{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useNavigate,useParams,useLocation}from\"react-router-dom\";import{EditorState,convertToRaw,convertFromRaw}from'draft-js';import'../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';import{useUserContext}from\"../userContext\";import api from\"../config/api\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faUser,faBarsStaggered,faChevronLeft}from\"@fortawesome/free-solid-svg-icons\";import{Modal}from\"react-bootstrap\";import{transformImage}from\"../reusables/getImage\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ArticlesUpdating(){const navigate=useNavigate();const[editorState,setEditorState]=useState(EditorState.createEmpty());var[articleSectionId,setArticleSectionId]=useState(27);// default id for uncategoried sections, ensure it's changed\nvar[articleHeadline,setArticleHeadline]=useState('');var[articleToUpdateLoaded,setArticleToUpdateLoaded]=useState(false);const{loading,user}=useUserContext();let{articleIdToUpdate}=useParams();const[articleToUpdate,setArticleToUpdate]=useState(null);const[awaitingResponse,setAwaitingResponse]=useState(false);const[isDraft,setIsdraft]=useState();const[articleSections,setArticleSections]=useState([]);const[isAddingNewCategory,setIsAddingNewCategory]=useState(false);const[newCategory,setNewCategory]=useState(\"\");const[isSidePanelVisible,setIsSidePanelVisible]=useState(true);const[showSessionEndedModal,setShowSessionEndedModal]=useState(false);const[isAutoSaving,setIsAutoSaving]=useState(true);const[userProfilePhoto,setUserProfilePhoto]=useState(null);const queryParams=new URLSearchParams(useLocation().search);const isRecoverDraft=queryParams.get('recover');const[Editor,setEditor]=useState(null);useEffect(()=>{import('react-draft-wysiwyg').then(module=>{setEditor(()=>module.Editor);});},[]);const resizeImages=useCallback(contentState=>{const images=extractImagesFromContent(contentState);let updatedContentState=contentState;for(var imageSrc of images){// Replace image in content with the resized image\nupdatedContentState=replaceImageInContent(updatedContentState,imageSrc,imageSrc,'400px');}return updatedContentState;},[]);function fetchArticleToUpdate(){api.get(\"/single/\".concat(articleIdToUpdate)).then(response=>{console.log(\"fetched articleToBeUpdated::\",response);setArticleToUpdate(response.data.article[0]);setArticleSectionId(articleToUpdate.articleSectionId);setArticleHeadline(decodeURIComponent(articleToUpdate.articleHeadline));setIsdraft(articleToUpdate.articleIsDraft);const fetchedArticleBody=response.data.article[0].articleBody;const parsedArticleBody=JSON.parse(fetchedArticleBody);const articleBodyContentState=convertFromRaw(parsedArticleBody);const bodyWithResizedImages=resizeImages(articleBodyContentState);setEditorState(EditorState.createWithContent(bodyWithResizedImages));setArticleToUpdateLoaded(true);}).catch(err=>{console.log(\"get single article error\",err);});}useEffect(()=>{if(articleIdToUpdate!=='null'&&!articleToUpdateLoaded&&isRecoverDraft!=='true'){console.log(\"articleToUpdate not nulll\");fetchArticleToUpdate();}});// useEffect(()=>{\n//     const autoSaveToServer = ()=>{\n//         if(!isEditorStateEmpty(editorState) \n//             && articleHeadline !== '' \n//             && user !== 'unauthorized')\n//         { \n//             console.log(\"Saviing draft again..\", new Date().getSeconds())\n//             handleSubmit(null, true);\n//             const rawContentState = convertToRaw(editorState.getCurrentContent())\n//             const serializedContent = JSON.stringify(rawContentState);\n//             setArticleToUpdate({\n//                 ...articleToUpdate,\n//                 articleBody: serializedContent,\n//                 articleHeadline: articleHeadline,\n//                 articleSectionId: articleSectionId\n//             });\n//             console.log(\"The article to update some time in future:\", articleToUpdate)\n//         }\n//     }\n//     const intervalId = setInterval(autoSaveToServer, 10000);\n//     return  ()=> clearInterval(intervalId);\n// })\n// auto saving to local storage\nuseEffect(()=>{const autoSaveToLocalStorage=()=>{const rawContentState=convertToRaw(editorState.getCurrentContent());const serializedContent=JSON.stringify(rawContentState);let draft={articleId:articleIdToUpdate,articleHeadline:articleHeadline,articleBody:serializedContent,articleSectionId:articleSectionId};draft=JSON.stringify(draft);localStorage.setItem('draft',draft);};const intervalId=setInterval(autoSaveToLocalStorage,100);return()=>clearInterval(intervalId);},[articleHeadline,editorState,articleIdToUpdate,articleSectionId]);//recover draft from storage\nuseEffect(()=>{if(isRecoverDraft&&isRecoverDraft==='true'){let storedDraft=localStorage.getItem('draft');storedDraft=JSON.parse(storedDraft);setArticleToUpdate(storedDraft);let storedArticleBody=JSON.parse(storedDraft.articleBody);const articleBodyContentState=convertFromRaw(storedArticleBody);const bodyWithResizedImages=resizeImages(articleBodyContentState);setEditorState(EditorState.createWithContent(bodyWithResizedImages));setArticleHeadline(storedDraft.articleHeadline);setArticleSectionId(storedDraft.articleSectionId);}},[isRecoverDraft,resizeImages]);useEffect(()=>{function handleWindowResize(){const newWidth=window.innerWidth;if(newWidth<1200){setIsSidePanelVisible(false);}else{setIsSidePanelVisible(true);}}handleWindowResize();window.addEventListener('resize',handleWindowResize);return()=>{window.removeEventListener('resize',handleWindowResize);};},[]);// const isEditorStateEmpty = (editorState)=>{\n//     const contentState = editorState.getCurrentContent();\n//     const rawContent = convertToRaw(contentState);\n//     const blocks  = rawContent.blocks;\n//     return blocks.every(block =>{\n//         const isEmptyText = !block.text.trim();\n//         const hasNoEntities = block.entityRanges.length === 0;\n//         return isEmptyText && hasNoEntities;\n//     });\n// }\nconst onEditorStateChange=editorState=>{setEditorState(editorState);};const uploadImageToEditor=file=>{return new Promise((resolve,reject)=>{const reader=new FileReader();reader.onloadend=()=>{resolve({data:{link:reader.result}});};reader.readAsDataURL(file);});};const fetchSections=useCallback(async()=>{await api.get('/sections').then(response=>{setArticleSections(response.data.sections);}).catch(err=>{console.log(\"error fetching sections\",err);});},[]);useEffect(()=>{if(!loading&&user!=null){if(user.userLevel!==1){console.log(\"user current state: \",user);navigate(-1,{replace:true});}setUserProfilePhoto(user.userProfilePhoto);fetchSections();}},[loading,navigate,user,articleToUpdate,articleToUpdateLoaded,fetchSections]);async function uploadImageToCloud(imageSrc){console.log(\"uplading to cloud called\");if(imageSrc===null){return null;}var formData=new FormData();formData.append('file',imageSrc);formData.append('upload_preset',process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);console.log(\"the file\",formData);try{const res=await fetch(\"https://api.cloudinary.com/v1_1/\".concat(process.env.REACT_APP_CLOUDINARY_CLOUD__NAME,\"/image/upload/\"),{method:\"post\",body:formData});if(res.ok){let data;data=await res.json();if(data!==undefined){console.log(\"\\n secure_url\",data.secure_url);return data.secure_url;}}}catch(err){console.log(\"file upload err\",err);}}const replaceImageInContent=(contentState,oldSrc,newSrc,newHeight)=>{let newContentState=contentState;const blockMap=newContentState.getBlockMap();blockMap.forEach(block=>{block.findEntityRanges(character=>{const entityKey=character.getEntity();return entityKey!==null&&newContentState.getEntity(entityKey).getType()==='IMAGE';},(start,end)=>{const entityKey=block.getEntityAt(start);const entity=newContentState.getEntity(entityKey);const{src}=entity.getData();if(src===oldSrc){newContentState=newContentState.replaceEntityData(entityKey,{src:newSrc,height:newHeight,width:'600px',alignment:'left'});}});});return newContentState;};const extractImagesFromContent=contentState=>{const contentBlocks=contentState.getBlocksAsArray();let images=[];contentBlocks.forEach(block=>{block.findEntityRanges(character=>{const entityKey=character.getEntity();return entityKey!==null&&contentState.getEntity(entityKey).getType()==='IMAGE';},(start,end)=>{const entityKey=block.getEntityAt(start);const entity=contentState.getEntity(entityKey);const{src}=entity.getData();console.log(\"gotten src:\",src,\"the entity type:\",entity.getType(),\"the entity data:\",entity.getData().url);images.push(src);});});return images;};function prepareArticleExcerpt(){const contentState=editorState.getCurrentContent();const rawContentState=convertToRaw(contentState);const rawContentBlocks=rawContentState.blocks;const allImages=extractImagesFromContent(contentState);let firstImage=allImages.length>0?allImages[0]:null;let firstParagraph=null;let htmlContent='';for(let block of rawContentBlocks){if(block.text&&block.text.trim().length>0){firstParagraph=block.text;break;}}if(firstImage!==null){htmlContent+=\"<div id=\\\"previewImageContainer\\\" style=\\\"width: 100%; height: 300px;\\\">\\n                                <img src=\\\"\".concat(firstImage,\"\\\" alt=\\\"\\\" style=\\\"width:100%; height:100%; object-fit: cover;\\\"/>\\n                            </div>    \\n                            \");}if(firstParagraph!==null){htmlContent+=\"<p>\".concat(firstParagraph,\"</p>\");}console.log(\"combined html content\",htmlContent);return htmlContent;}function calculateReadTime(){const rawContent=convertToRaw(editorState.getCurrentContent());const blocks=rawContent.blocks;const textContent=blocks.map(block=>block.text).join(' ');const wordCount=textContent.trim().split(/\\s+/).length;const wordsPerMinute=200;const readTimeInMinutes=Math.ceil(wordCount/wordsPerMinute);return readTimeInMinutes;}async function addArticle(articleBody,submitAsDraft){let articleExcerpt=prepareArticleExcerpt();const readTimeInMinutes=calculateReadTime();console.log(\"encodeURIComponent:\",encodeURI(articleBody).replace(\"'\",\"&apos;\"));console.log(articleBody,\"\\n\",articleHeadline,\"\\n\",articleSectionId,\"\\n\"/*articlePhoto.name.replace(/ /g,\"_\")*/);let imgUrl=null;imgUrl=await uploadImageToCloud();console.log(\"imgUrl\",imgUrl);await api.post('/addArticle',{headers:{'content-type':'application/json'},articleSectionId:articleSectionId,articleHeadline:encodeURIComponent(articleHeadline).replace(/'/g,\"&apos;\"),articleBody:articleBody,//encodeURIComponent(articleBody).replace(/'/g,\"&apos;\"),\nwithCredentials:true,img:imgUrl,isDraft:submitAsDraft,articleExcerpt:articleExcerpt,readTimeInMinutes:readTimeInMinutes}).then(response=>{if(response&&response.status===200){const articleId=response.data.articleId;setAwaitingResponse(false);navigate(\"/articlePosting/\".concat(articleId),{replace:true});localStorage.removeItem('draft');}}).catch(err=>{console.log(err);if(err.response&&err.response.status===401){setAwaitingResponse(false);setShowSessionEndedModal(true);}});}async function updateArticle(articleBody,submitAsDraft){let articleExcerpt=prepareArticleExcerpt();const readTimeInMinutes=calculateReadTime();let imgUrl=null;let prevImg;console.log(\"editor state\",editorState);await api.post('/updateArticle',{headers:{'Content-Type':'application/json'},withCredentials:true,articleId:articleToUpdate.articleId,articleSectionId:articleSectionId,articleHeadline:encodeURIComponent(articleHeadline).replace(/'/g,\"&apos;\"),articleBody:articleBody,img:imgUrl,prevImg:prevImg,isDraft:submitAsDraft,articleExcerpt:articleExcerpt,readTimeInMinutes:readTimeInMinutes}).then(response=>{if(response&&response.status===200){setAwaitingResponse(false);localStorage.removeItem('draft');if(!isAutoSaving)fetchArticleToUpdate();}}).catch(err=>{console.log(err);if(err.response&&err.response.status===401){setAwaitingResponse(false);setShowSessionEndedModal(true);}});}/*\n        function handleSubmit : extract images, call image upload, call update or add article\n\n        params: e - submit Event\n                submitAsDraft              \n\n    */async function handleSubmit(e,submitAsDraft){if(e)e.preventDefault();// Extract images from editor content\nconst contentState=editorState.getCurrentContent();const images=extractImagesFromContent(contentState);//When Editing an already saved article\nlet previousImages=[];if(articleIdToUpdate!=='null'){console.log(typeof articleToUpdate,\" article itself\",articleToUpdate.articleBody);const uneditedArticleBody=articleToUpdate.articleBody;const parsedUneditedArticleBody=JSON.parse(uneditedArticleBody);const articleBodyContentState=convertFromRaw(parsedUneditedArticleBody);previousImages=extractImagesFromContent(articleBodyContentState);}// Upload each image and replace in content with URL\nconst uploadedUrls=await Promise.all(images.map(async imageSrc=>{if(previousImages.includes(imageSrc)){console.log(\"image saved already\");return null;}//upload image  \nconst imageUrl=await uploadImageToCloud(imageSrc);const tranformedImageUrl=transformImage(imageUrl);// Replace image in content with the uploaded URL\nconst newContentState=replaceImageInContent(contentState,imageSrc,tranformedImageUrl);setEditorState(EditorState.createWithContent(newContentState));return imageUrl;}));console.log(\"Uploaded urls\",uploadedUrls);const rawContentState=convertToRaw(editorState.getCurrentContent());const serializedContent=JSON.stringify(rawContentState);console.log(\"Article body: \",serializedContent);if(articleToUpdate==null){addArticle(serializedContent,submitAsDraft);}else{updateArticle(serializedContent,submitAsDraft);}}async function addNewSection(){if(newCategory!==\"\"){await api.post('/addSection',{sectionName:newCategory}).then(response=>{setArticleSectionId(response.data.sectionId);setNewCategory(\"\");setIsAddingNewCategory(false);fetchSections();});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-black m-0  p-1 ps-1 pe-1 ps-md-3 pe-md-4  top-0 w-100 position-fixed\",id:\"writing-nav\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigate('/');},className:\"btn d-flex gap-2 align-items-center ms-xl-3\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faChevronLeft,className:\"admin-nav-icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-white\",children:\"My home\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-end align-items-center gap-2 gap-md-3 \",children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'lightgrey',width:\"24px\",height:\"24px\"},className:\"d-flex justify-content-center align-items-center rounded-circle overflow-hidden\",onClick:e=>{e.stopPropagation();navigate('/profile');},children:userProfilePhoto!==null?/*#__PURE__*/_jsx(\"img\",{src:userProfilePhoto,alt:\"\",className:\"w-100 h-100 object-fit-cover rounded-circle\",style:{}}):/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser,className:\"ic-white w-100 h-100 pt-2\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn d-flex\",onClick:()=>{setIsSidePanelVisible(!isSidePanelVisible);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBarsStaggered,className:\"admin-nav-icon\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{id:\"writing-nav-spacer\"}),/*#__PURE__*/_jsx(\"div\",{id:\"article-update\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",className:\"mb-5 \",id:\"article-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xl-9  d-lg-flex justify-content-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-10 m-xl-0 ms-4 me-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mt-3 mt-sm-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"articleHeadline\",className:\"w-100 border-0\",id:\"title-input\",placeholder:\"Add title...\",minLength:\"2\",required:true,value:articleHeadline,onChange:e=>setArticleHeadline(e.target.value)})}),/*#__PURE__*/_jsx(Editor,{editorState:editorState,onEditorStateChange:onEditorStateChange,toolbarClassName:\"toolbar col-xl-8 me-xl-5 me-3\",wrapperClassName:\"wrapper-class \",editorClassName:\"editor \",placeholder:\"Type your content here or add images...\",toolbar:{image:{uploadCallback:uploadImageToEditor,alignmentEnabled:true,previewImage:true,alt:{present:true,mandatory:false},defaultSize:{height:'350px',width:'400px'}}}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu \".concat(isSidePanelVisible?\"\":\" d-none\"),id:\"writing-side-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" border p-3 mb-2\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"\",children:\"Post\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-block pb-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Status: \"}),articleToUpdate!==null&&!isDraft?/*#__PURE__*/_jsx(\"span\",{children:\"Published\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Draft\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-block pb-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Visibility: \"}),articleToUpdate!==null&&!isDraft?/*#__PURE__*/_jsx(\"span\",{children:\"Public\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Private\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2  align-items-center justify-content-between mt-1\",children:[awaitingResponse&&isDraft?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-info\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"col-8\",id:\"save-draft\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn border\",type:\"submit\",onClick:e=>{setIsdraft(true);setAwaitingResponse(true);setIsAutoSaving(false);handleSubmit(e,true);},children:/*#__PURE__*/_jsx(\"span\",{children:\"Save as a draft\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:awaitingResponse&&!isDraft?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-info col-12\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading...\"})}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light col-12\",id:\"publish-btn\",type:\"submit\",onClick:e=>{setIsdraft(false);setAwaitingResponse(true);setIsAutoSaving(false);handleSubmit(e,false);},children:\"Publish\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border p-3 d-flex flex-column\",id:\"category\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",id:\"available-categories\",children:articleSections.map((section,index)=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"section pb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",required:true,checked:section.sectionId===parseInt(articleSectionId,10),name:\"section\",value:section.sectionId,id:section.sectionId,onChange:e=>{setArticleSectionId(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:section.sectionId,children:section.sectionName})]});})}),/*#__PURE__*/_jsxs(\"div\",{id:\"add-category\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0 mb-3\",id:\"new-category-btn\",type:\"button\",onClick:()=>{setIsAddingNewCategory(true);},children:\"Add New Category\"}),isAddingNewCategory?/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"newCategory\",className:\"w-100 form-control\",placeholder:\"New Category name\",minlength:\"\",maxlength:\"200\",value:newCategory,onChange:e=>setNewCategory(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:newCategory===\"\"?\"btn btn-light\":\"btn-ready\",type:\"button\",id:\"add-category-btn\",onClick:addNewSection,children:\"Add new category\"})]}):null]})]})]})]})}),/*#__PURE__*/_jsx(Modal,{show:showSessionEndedModal,centered:true,children:/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(\"h6\",{children:\" Your Session has expired!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light\",onClick:()=>{setShowSessionEndedModal(false);},children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:()=>{navigate('/login');},children:\"Login\"})]})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","useLocation","EditorState","convertToRaw","convertFromRaw","useUserContext","api","FontAwesomeIcon","faUser","faBarsStaggered","faChevronLeft","Modal","transformImage","jsx","_jsx","jsxs","_jsxs","ArticlesUpdating","navigate","editorState","setEditorState","createEmpty","articleSectionId","setArticleSectionId","articleHeadline","setArticleHeadline","articleToUpdateLoaded","setArticleToUpdateLoaded","loading","user","articleIdToUpdate","articleToUpdate","setArticleToUpdate","awaitingResponse","setAwaitingResponse","isDraft","setIsdraft","articleSections","setArticleSections","isAddingNewCategory","setIsAddingNewCategory","newCategory","setNewCategory","isSidePanelVisible","setIsSidePanelVisible","showSessionEndedModal","setShowSessionEndedModal","isAutoSaving","setIsAutoSaving","userProfilePhoto","setUserProfilePhoto","queryParams","URLSearchParams","search","isRecoverDraft","get","Editor","setEditor","then","module","resizeImages","contentState","images","extractImagesFromContent","updatedContentState","imageSrc","replaceImageInContent","fetchArticleToUpdate","concat","response","console","log","data","article","decodeURIComponent","articleIsDraft","fetchedArticleBody","articleBody","parsedArticleBody","JSON","parse","articleBodyContentState","bodyWithResizedImages","createWithContent","catch","err","autoSaveToLocalStorage","rawContentState","getCurrentContent","serializedContent","stringify","draft","articleId","localStorage","setItem","intervalId","setInterval","clearInterval","storedDraft","getItem","storedArticleBody","handleWindowResize","newWidth","window","innerWidth","addEventListener","removeEventListener","onEditorStateChange","uploadImageToEditor","file","Promise","resolve","reject","reader","FileReader","onloadend","link","result","readAsDataURL","fetchSections","sections","userLevel","replace","uploadImageToCloud","formData","FormData","append","process","env","REACT_APP_CLOUDINARY_UPLOAD_PRESET","res","fetch","REACT_APP_CLOUDINARY_CLOUD__NAME","method","body","ok","json","undefined","secure_url","oldSrc","newSrc","newHeight","newContentState","blockMap","getBlockMap","forEach","block","findEntityRanges","character","entityKey","getEntity","getType","start","end","getEntityAt","entity","src","getData","replaceEntityData","height","width","alignment","contentBlocks","getBlocksAsArray","url","push","prepareArticleExcerpt","rawContentBlocks","blocks","allImages","firstImage","length","firstParagraph","htmlContent","text","trim","calculateReadTime","rawContent","textContent","map","join","wordCount","split","wordsPerMinute","readTimeInMinutes","Math","ceil","addArticle","submitAsDraft","articleExcerpt","encodeURI","imgUrl","post","headers","encodeURIComponent","withCredentials","img","status","removeItem","updateArticle","prevImg","handleSubmit","e","preventDefault","previousImages","uneditedArticleBody","parsedUneditedArticleBody","uploadedUrls","all","includes","imageUrl","tranformedImageUrl","addNewSection","sectionName","sectionId","className","children","id","onClick","icon","style","backgroundColor","stopPropagation","alt","onSubmit","encType","type","name","placeholder","minLength","required","value","onChange","target","toolbarClassName","wrapperClassName","editorClassName","toolbar","image","uploadCallback","alignmentEnabled","previewImage","present","mandatory","defaultSize","section","index","checked","parseInt","htmlFor","minlength","maxlength","show","centered","Body"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/articleUpdating.jsx"],"sourcesContent":["import React,{useState,useEffect, useCallback} from \"react\";\nimport { useNavigate, useParams, useLocation } from \"react-router-dom\";\nimport { EditorState, convertToRaw,convertFromRaw } from 'draft-js';\nimport '../../node_modules/react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { useUserContext } from \"../userContext\";\nimport api from \"../config/api\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUser,faBarsStaggered, faChevronLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { Modal } from \"react-bootstrap\";\nimport { transformImage } from \"../reusables/getImage\";\n\nexport default function ArticlesUpdating(){\n    const navigate=useNavigate();\n\n    const [editorState, setEditorState] = useState(EditorState.createEmpty());\n    var [articleSectionId,setArticleSectionId]=useState(27); // default id for uncategoried sections, ensure it's changed\n    var [articleHeadline,setArticleHeadline]=useState('');\n    var [articleToUpdateLoaded, setArticleToUpdateLoaded] = useState(false);\n    const {loading,user} = useUserContext();\n    let {articleIdToUpdate} = useParams();\n    const [articleToUpdate,setArticleToUpdate] = useState(null);\n    const [awaitingResponse, setAwaitingResponse] = useState(false);\n    const [isDraft, setIsdraft] = useState();\n    const [articleSections, setArticleSections]= useState([]);\n    const [isAddingNewCategory,setIsAddingNewCategory] = useState(false);\n    const [newCategory, setNewCategory] = useState(\"\");\n    const [isSidePanelVisible, setIsSidePanelVisible] = useState(true);\n    const [showSessionEndedModal, setShowSessionEndedModal] = useState(false);\n    const [isAutoSaving, setIsAutoSaving] = useState(true);\n    const [userProfilePhoto, setUserProfilePhoto] = useState(null);\n    const queryParams = new URLSearchParams(useLocation().search);\n    const isRecoverDraft = queryParams.get('recover');\n    const [Editor, setEditor] = useState(null);\n\n    useEffect(() => {\n        import('react-draft-wysiwyg').then((module) => {\n        setEditor(() => module.Editor);\n        });\n    }, []);\n\n    const resizeImages = useCallback((contentState)=>{\n        const images = extractImagesFromContent(contentState);\n        let updatedContentState = contentState;\n\n        for(var imageSrc of images){        \n            // Replace image in content with the resized image\n            updatedContentState = replaceImageInContent(updatedContentState, imageSrc, imageSrc,'400px');             \n        }\n\n        return updatedContentState;\n    },[])\n    \n    function  fetchArticleToUpdate() {\n        api.get(`/single/${articleIdToUpdate}`)\n             .then((response)=>{\n                console.log(\"fetched articleToBeUpdated::\",response)\n                setArticleToUpdate(response.data.article[0]) ;\n\n                setArticleSectionId(articleToUpdate.articleSectionId);\n                setArticleHeadline(decodeURIComponent(articleToUpdate.articleHeadline))\n                setIsdraft(articleToUpdate.articleIsDraft);\n\n                const fetchedArticleBody = response.data.article[0].articleBody;\n                const parsedArticleBody = JSON.parse(fetchedArticleBody);\n                const articleBodyContentState = convertFromRaw(parsedArticleBody);\n                const bodyWithResizedImages = resizeImages(articleBodyContentState);\n                setEditorState(EditorState.createWithContent(bodyWithResizedImages));\n\n                setArticleToUpdateLoaded(true);\n            })\n            .catch((err)=>{\n                console.log(\"get single article error\",err)\n            });\n    }\n\n   useEffect(()=>{\n        if(articleIdToUpdate !== 'null' && ! articleToUpdateLoaded && isRecoverDraft !== 'true'){\n            console.log(\"articleToUpdate not nulll\")\n                fetchArticleToUpdate();\n\n            }\n            \n        }\n    )\n\n\n\n    // useEffect(()=>{\n    //     const autoSaveToServer = ()=>{\n    //         if(!isEditorStateEmpty(editorState) \n    //             && articleHeadline !== '' \n    //             && user !== 'unauthorized')\n    //         { \n    //             console.log(\"Saviing draft again..\", new Date().getSeconds())\n    //             handleSubmit(null, true);\n\n    //             const rawContentState = convertToRaw(editorState.getCurrentContent())\n    //             const serializedContent = JSON.stringify(rawContentState);\n    //             setArticleToUpdate({\n    //                 ...articleToUpdate,\n    //                 articleBody: serializedContent,\n    //                 articleHeadline: articleHeadline,\n    //                 articleSectionId: articleSectionId\n    //             });\n\n    //             console.log(\"The article to update some time in future:\", articleToUpdate)\n    //         }\n    //     }\n\n    //     const intervalId = setInterval(autoSaveToServer, 10000);\n\n    //     return  ()=> clearInterval(intervalId);\n    // })\n\n\n\n    // auto saving to local storage\n    useEffect(()=>{\n        const autoSaveToLocalStorage = ()=>{\n            const rawContentState = convertToRaw(editorState.getCurrentContent())\n            const serializedContent = JSON.stringify(rawContentState);  \n            let draft  =  {\n                articleId: articleIdToUpdate,\n                articleHeadline: articleHeadline,\n                articleBody: serializedContent,\n                articleSectionId: articleSectionId\n            };\n            draft = JSON.stringify(draft);\n            localStorage.setItem('draft',draft );\n        }\n\n        const intervalId = setInterval(autoSaveToLocalStorage, 100);\n\n        return ()=> clearInterval(intervalId);\n    },[articleHeadline,editorState, articleIdToUpdate, articleSectionId])\n\n    //recover draft from storage\n    useEffect(()=>{\n        if(isRecoverDraft && isRecoverDraft === 'true'){\n            let storedDraft = localStorage.getItem('draft');\n            storedDraft = JSON.parse(storedDraft);\n            setArticleToUpdate(storedDraft);\n            let storedArticleBody  = JSON.parse(storedDraft.articleBody);\n            const articleBodyContentState = convertFromRaw(storedArticleBody);\n            const bodyWithResizedImages = resizeImages(articleBodyContentState);\n            setEditorState(EditorState.createWithContent(bodyWithResizedImages));\n            setArticleHeadline(storedDraft.articleHeadline);\n            setArticleSectionId(storedDraft.articleSectionId);\n        }\n    },[isRecoverDraft,resizeImages])\n\n    useEffect(()=>{\n        function handleWindowResize(){\n            const newWidth = window.innerWidth\n\n            if(newWidth < 1200){\n                setIsSidePanelVisible(false);\n            }\n            else{\n                setIsSidePanelVisible(true);\n            }\n        }\n\n        handleWindowResize()\n\n        window.addEventListener('resize',handleWindowResize)\n\n        return ()=>{\n            window.removeEventListener('resize',handleWindowResize)\n        }\n\n    },[])\n\n    // const isEditorStateEmpty = (editorState)=>{\n    //     const contentState = editorState.getCurrentContent();\n    //     const rawContent = convertToRaw(contentState);\n    //     const blocks  = rawContent.blocks;\n\n    //     return blocks.every(block =>{\n    //         const isEmptyText = !block.text.trim();\n    //         const hasNoEntities = block.entityRanges.length === 0;\n    //         return isEmptyText && hasNoEntities;\n    //     });\n    // }\n\n    const onEditorStateChange = (editorState)=>{\n        setEditorState(editorState);\n    }\n\n    const uploadImageToEditor = (file)=>{\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                resolve({ data: { link: reader.result } });\n            };\n            reader.readAsDataURL(file);\n        });\n    }\n\n\n     const fetchSections = useCallback(async()=>{\n        await api.get('/sections')\n            .then((response)=>{\n              setArticleSections(response.data.sections);\n\n            })\n            .catch((err)=>{\n              console.log(\"error fetching sections\", err)\n            });        \n          }\n     ,[])\n\n    useEffect(()=>{\n        if(!loading && user != null){\n            if(user.userLevel !== 1){\n                console.log(\"user current state: \",user);\n                navigate(-1,{replace:true})\n            }\n            \n            setUserProfilePhoto(user.userProfilePhoto);\n            fetchSections();\n\n        }\n\n        \n    },[loading,navigate,user,articleToUpdate, articleToUpdateLoaded,fetchSections])\n    \n\n    async function uploadImageToCloud(imageSrc){\n        console.log(\"uplading to cloud called\");\n\n        if(imageSrc===null){\n            return null;\n        }\n        var formData=new FormData();\n\n        formData.append('file',imageSrc);\n        formData.append('upload_preset',process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);\n        console.log(\"the file\",formData)\n\n        try{\n            const res=await fetch(\n                `https://api.cloudinary.com/v1_1/${process.env.REACT_APP_CLOUDINARY_CLOUD__NAME}/image/upload/`,\n                        {\n                            method:\"post\",\n                            body:formData\n                        }\n                )\n            if(res.ok){\n                let data;\n                data  = await res.json()\n                if(data!== undefined){\n                   \n                    console.log(\"\\n secure_url\",data.secure_url)\n                    return data.secure_url\n                }\n            }   \n           \n        }catch(err){\n            console.log(\"file upload err\",err);\n        }\n    }\n\n    const replaceImageInContent = (contentState, oldSrc, newSrc,newHeight) => {\n        let newContentState = contentState;\n        const blockMap = newContentState.getBlockMap();\n    \n        blockMap.forEach((block) => {\n            block.findEntityRanges(\n                (character) => {\n                    const entityKey = character.getEntity();\n                    return (\n                        entityKey !== null &&\n                        newContentState.getEntity(entityKey).getType() === 'IMAGE'\n                    );\n                },\n                (start, end) => {\n                    const entityKey = block.getEntityAt(start);\n                    const entity = newContentState.getEntity(entityKey);\n                    const { src } = entity.getData();\n                    if (src === oldSrc) {\n                        newContentState = newContentState\n                                            .replaceEntityData(entityKey, \n                                                { src: newSrc,\n                                                  height:newHeight,\n                                                  width:'600px',\n                                                  alignment:'left'\n                                                });\n                    }\n                }\n            );\n        });\n    \n        return newContentState;\n    };\n\n    const extractImagesFromContent = (contentState) => {\n        const contentBlocks = contentState.getBlocksAsArray();\n        let images = [];\n        contentBlocks.forEach((block) => {\n            block.findEntityRanges(\n                (character) => {\n                    const entityKey = character.getEntity();\n                    return (\n                        entityKey !== null &&\n                        contentState.getEntity(entityKey).getType() === 'IMAGE'\n                    );\n                },\n                (start, end) => {\n                    const entityKey = block.getEntityAt(start);\n                    const entity = contentState.getEntity(entityKey);\n                    const { src } = entity.getData();\n                    console.log(\"gotten src:\", src,\"the entity type:\", entity.getType(), \"the entity data:\", entity.getData().url)\n                    images.push(src);\n                }\n            );\n        });\n        return images;\n    };\n\n\n    function prepareArticleExcerpt(){\n        const contentState = editorState.getCurrentContent();\n        const rawContentState = convertToRaw(contentState)\n        const rawContentBlocks = rawContentState.blocks;\n        const allImages = extractImagesFromContent(contentState);\n        let firstImage = (allImages.length > 0 )? allImages[0] : null;\n\n        let firstParagraph = null;\n        let htmlContent = ''\n\n        for(let block of rawContentBlocks){\n            if(block.text && block.text.trim().length > 0){\n                firstParagraph = block.text;\n                break;\n            }\n        }     \n\n\n        if(firstImage !== null){\n            htmlContent += `<div id=\"previewImageContainer\" style=\"width: 100%; height: 300px;\">\n                                <img src=\"${firstImage}\" alt=\"\" style=\"width:100%; height:100%; object-fit: cover;\"/>\n                            </div>    \n                            `;\n        }\n\n        if(firstParagraph !== null){\n            htmlContent += `<p>${firstParagraph}</p>`;\n        }\n\n        console.log(\"combined html content\", htmlContent);\n\n        return htmlContent;\n\n    }\n\n    function calculateReadTime(){\n        const rawContent = convertToRaw(editorState.getCurrentContent());\n        const blocks = rawContent.blocks;\n        const textContent = blocks.map(block => block.text).join(' ');\n        const wordCount = textContent.trim().split(/\\s+/).length;\n        const wordsPerMinute = 200;\n        const readTimeInMinutes = Math.ceil(wordCount / wordsPerMinute);\n        return readTimeInMinutes;\n    }\n\n    \n\n    async function addArticle(articleBody,submitAsDraft){\n        let articleExcerpt = prepareArticleExcerpt();\n        const readTimeInMinutes = calculateReadTime();\n\n        console.log(\"encodeURIComponent:\",encodeURI(articleBody).replace(\"'\",\"&apos;\"))\n        console.log(articleBody,\"\\n\",articleHeadline,\"\\n\",articleSectionId,\"\\n\",/*articlePhoto.name.replace(/ /g,\"_\")*/)\n        \n        let imgUrl = null;\n        imgUrl = await uploadImageToCloud();\n        console.log(\"imgUrl\",imgUrl)\n\n        \n        \n        await api.post('/addArticle',\n                {\n                    headers: { 'content-type': 'application/json' },\n                    articleSectionId: articleSectionId,\n                    articleHeadline:encodeURIComponent(articleHeadline).replace(/'/g,\"&apos;\"),\n                    articleBody:articleBody,//encodeURIComponent(articleBody).replace(/'/g,\"&apos;\"),\n                    withCredentials:true,\n                    img:imgUrl,\n                    isDraft: submitAsDraft,\n                    articleExcerpt: articleExcerpt,\n                    readTimeInMinutes: readTimeInMinutes\n                },\n                )\n            .then((response)=>{\n            if(response && response.status===200){\n                const articleId = response.data.articleId;\n                setAwaitingResponse(false);\n                navigate(`/articlePosting/${articleId}`,{replace:true});\n                localStorage.removeItem('draft');\n            }\n            })\n            .catch((err)=>{\n            console.log(err)\n            if(err.response && err.response.status===401){\n                setAwaitingResponse(false);\n                setShowSessionEndedModal(true);\n            }\n            })\n           \n    }\n\n    async function updateArticle(articleBody,submitAsDraft){\n        let articleExcerpt = prepareArticleExcerpt();\n        const readTimeInMinutes = calculateReadTime();\n\n        let imgUrl= null;\n        let prevImg;\n\n    \n        console.log(\"editor state\",editorState)\n\n\n        await api.post('/updateArticle',\n                {\n                    headers: { 'Content-Type': 'application/json' },\n                    withCredentials:true,\n                    articleId: articleToUpdate.articleId,\n                    articleSectionId:articleSectionId,\n                    articleHeadline:encodeURIComponent(articleHeadline).replace(/'/g,\"&apos;\"),\n                    articleBody: articleBody,\n                    img:imgUrl,\n                    prevImg : prevImg,\n                    isDraft:submitAsDraft,\n                    articleExcerpt: articleExcerpt,\n                    readTimeInMinutes: readTimeInMinutes\n                },\n                )\n            .then((response)=>{\n                if(response && response.status===200){\n                    setAwaitingResponse(false);\n                    localStorage.removeItem('draft');\n                    if(!isAutoSaving)fetchArticleToUpdate();\n                }\n            })\n            .catch((err)=>{\n            console.log(err)\n            if(err.response && err.response.status===401){\n                setAwaitingResponse(false);\n                setShowSessionEndedModal(true);\n            }\n            })\n        \n    }\n\n    /*\n        function handleSubmit : extract images, call image upload, call update or add article\n\n        params: e - submit Event\n                submitAsDraft              \n\n    */\n    async function handleSubmit(e, submitAsDraft){\n        if(e) e.preventDefault();\n        \n\n        // Extract images from editor content\n        const contentState = editorState.getCurrentContent();\n        const images = extractImagesFromContent(contentState);\n\n\n        //When Editing an already saved article\n        let previousImages= [];\n        if(articleIdToUpdate !== 'null'){\n            console.log(typeof articleToUpdate,\" article itself\",articleToUpdate.articleBody)\n            const uneditedArticleBody = articleToUpdate.articleBody;\n            const parsedUneditedArticleBody = JSON.parse(uneditedArticleBody);\n            const articleBodyContentState = convertFromRaw(parsedUneditedArticleBody);\n            previousImages = extractImagesFromContent(articleBodyContentState);\n        }\n        \n\n        // Upload each image and replace in content with URL\n        const uploadedUrls = await Promise.all(\n            images.map(async (imageSrc) => {\n                if(previousImages.includes(imageSrc)){\n                    console.log(\"image saved already\")\n                    return null;\n                }\n\n                //upload image  \n                const imageUrl = await uploadImageToCloud(imageSrc);\n\n                const tranformedImageUrl = transformImage(imageUrl);\n\n                // Replace image in content with the uploaded URL\n                const newContentState = replaceImageInContent(contentState, imageSrc, tranformedImageUrl);\n                setEditorState(EditorState.createWithContent(newContentState));\n\n                return imageUrl;\n               \n                   \n            })\n        );\n\n        console.log(\"Uploaded urls\",uploadedUrls)\n\n\n        const rawContentState = convertToRaw(editorState.getCurrentContent())\n        const serializedContent = JSON.stringify(rawContentState);\n\n        console.log(\"Article body: \",serializedContent);\n\n        if(articleToUpdate == null){\n             addArticle(serializedContent,submitAsDraft);\n        }\n        else{\n            updateArticle(serializedContent,submitAsDraft);\n        }\n    }\n    \n   \n    async function addNewSection(){\n        if(newCategory!==\"\"){\n            await api.post('/addSection',{sectionName: newCategory})\n                     .then((response)=>{\n                        setArticleSectionId(response.data.sectionId);\n                        setNewCategory(\"\");\n                        setIsAddingNewCategory(false);\n                        fetchSections();\n                     })\n\n        }\n    }\n\n    return(\n        <div className=\"\" >\n            <div className=\"bg-black m-0  p-1 ps-1 pe-1 ps-md-3 pe-md-4  top-0 w-100 position-fixed\" \n                id=\"writing-nav\"\n               >\n                <div className=\"d-flex justify-content-between\">\n                    <button onClick={()=>{navigate('/')}} className=\"btn d-flex gap-2 align-items-center ms-xl-3\">\n                        <FontAwesomeIcon icon={faChevronLeft} className=\"admin-nav-icon\"/>\n                        <span className=\"text-white\">My home</span>\n                    </button>\n\n                    <div className='d-flex justify-content-end align-items-center gap-2 gap-md-3 '>\n                    \n                    <div style={{backgroundColor:'lightgrey', width:\"24px\",height:\"24px\"}}\n                      className=\"d-flex justify-content-center align-items-center rounded-circle overflow-hidden\"\n                      onClick={(e)=>{e.stopPropagation(); navigate('/profile')}}\n                      >\n                      \n                        {\n                        (userProfilePhoto!==null)\n                            ?<img src={userProfilePhoto} alt=\"\" className=\"w-100 h-100 object-fit-cover rounded-circle\" style={{}}/>\n                            :<FontAwesomeIcon icon={faUser} className=\"ic-white w-100 h-100 pt-2\"/>\n\n                        }\n                    </div>\n                    \n                    <button className=\"btn d-flex\" \n                        onClick={()=>{setIsSidePanelVisible(!isSidePanelVisible)}}\n                        >\n                        <FontAwesomeIcon icon={faBarsStaggered} className=\"admin-nav-icon\"/>\n                    </button>\n                </div>\n                </div>             \n            </div>\n            <div id=\"writing-nav-spacer\"></div>\n            \n            <div id =\"article-update\">\n                <form  onSubmit={handleSubmit} \n                    encType=\"multipart/form-data\" \n                    className=\"mb-5 \" \n                    id = \"article-form\">\n\n                    <div className={`col-xl-9  d-lg-flex justify-content-start`}>\n                    \n                        {/* spacer in xl screens */}\n                        <div className=\"col-xl-2\"></div>\n\n                        <div className=\"col-10 m-xl-0 ms-4 me-4\">\n                            <div className=\"d-flex mt-3 mt-sm-0\">\n                                <input type=\"text\"  name=\"articleHeadline\" className=\"w-100 border-0\" \n                                    id = \"title-input\"\n                                    placeholder=\"Add title...\"  minLength=\"2\"  required value={articleHeadline}\n                                    onChange={(e)=>setArticleHeadline(e.target.value)}\n                                />\n                            </div>\n\n                                    \n\n                                \n                            <Editor\n                                editorState={editorState}\n                                onEditorStateChange={onEditorStateChange}\n                                toolbarClassName=\"toolbar col-xl-8 me-xl-5 me-3\"\n                                wrapperClassName=\"wrapper-class \"\n                                editorClassName=\"editor \"\n                                placeholder=\"Type your content here or add images...\"\n                                toolbar={{\n                                    image:{\n                                        uploadCallback:uploadImageToEditor,\n                                        alignmentEnabled: true,\n                                        previewImage :true,\n                                        alt:{\n                                            present:true,\n                                            mandatory:false\n                                        },\n                                        defaultSize:{\n                                            height:'350px',\n                                            width:'400px'\n                                        }\n                                    }\n                                }}\n                            \n                            />\n                        </div>\n\n\n                    </div>  \n\n                    <div className={`menu ${isSidePanelVisible?\"\":\" d-none\"}`}\n                            id=\"writing-side-panel\" >\n                        <div className=\" border p-3 mb-2\">\n                            <h5 className=\"\">Post</h5>\n                            <span className=\"d-block pb-2\">\n                                <b>Status: </b> \n                                {\n                                    articleToUpdate !== null && !isDraft\n                                    ? <span>Published</span>\n                                    : <span>Draft</span>\n                                }\n                                \n                            </span>\n                            <span className=\"d-block pb-2\">\n                                <b>Visibility: </b> \n                                {\n                                    articleToUpdate !== null && !isDraft\n                                    ? <span>Public</span>\n                                    : <span>Private</span>\n                                }\n                            </span>\n                        \n                        \n                            <div className=\"d-flex gap-2  align-items-center justify-content-between mt-1\" >\n                                {(awaitingResponse && isDraft )\n                                    ?<div className=\"spinner-border text-info\">\n                                        <span className=\"sr-only\">Loading...</span>\n                                    </div>\n                                    \n                                    :<div className=\"col-8\" id=\"save-draft\"> \n                                        <button className=\"btn border\" type=\"submit\"\n                                            onClick={(e)=>{\n                                                setIsdraft(true);\n                                                setAwaitingResponse(true);\n                                                setIsAutoSaving(false);\n                                                handleSubmit(e, true);\n                                                }} >\n                                            <span>Save as a draft</span>\n                                        </button>\n                                    \n                                    </div>\n                                }\n\n                                <div className=\"\">\n                                {(awaitingResponse && !isDraft )\n                                    ?<div className=\"spinner-border text-info col-12\">\n                                        <span className=\"sr-only\">Loading...</span>\n                                    </div>\n                                    \n                                    :<button className=\"btn btn-light col-12\" \n                                        id = \"publish-btn\"\n                                        type=\"submit\" \n                                        onClick={(e)=>{\n                                            setIsdraft(false);\n                                            setAwaitingResponse(true);\n                                            setIsAutoSaving(false);\n                                            handleSubmit(e, false);\n                                        }}\n                                    >                                       \n                                        Publish\n                                    </button>\n                                }\n                                \n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"border p-3 d-flex flex-column\" id=\"category\">\n                            <h5>Category</h5>\n                            <div className=\"mb-3\" id=\"available-categories\">\n                                {articleSections.map((section,index)=>{\n                                    return <div className=\"section pb-2\">\n                                        <input\n                                        type=\"radio\"\n                                        required\n                                        checked={section.sectionId === parseInt(articleSectionId,10)}\n                                        name=\"section\"\n                                        value= {section.sectionId}                               \n                                        id={section.sectionId}\n                                        onChange={(e)=>{setArticleSectionId(e.target.value); }} />\n                                        <label htmlFor={section.sectionId}>{section.sectionName}</label>\n                                    </div>\n                                })\n                            }\n                            \n                            </div>\n                            <div id=\"add-category\">\n                                <button className=\"btn btn-link p-0 mb-3\" id=\"new-category-btn\" type=\"button\" onClick={()=>{setIsAddingNewCategory(true)}}>\n                                    Add New Category\n                                </button>\n\n                                {(isAddingNewCategory)\n                                    ?<div className=\"d-flex flex-column gap-3\">\n                                        <input type=\"text\"  name=\"newCategory\" className=\"w-100 form-control\"\n                                            placeholder=\"New Category name\"  minlength=\"\" maxlength=\"200\" value={newCategory}\n                                            onChange={(e)=>setNewCategory(e.target.value)}\n                                        />\n\n                                        <button className={newCategory===\"\"?\"btn btn-light\": \"btn-ready\"}\n                                            type=\"button\"\n                                            id=\"add-category-btn\"\n                                            onClick={addNewSection}\n                                            >\n                                            Add new category\n                                        </button>\n                                    </div>\n\n                                    :null\n                                }\n                            </div>\n                        </div>\n                        \n                    </div>                    \n                    \n                </form>\n\n            </div>\n\n            <Modal show={showSessionEndedModal} centered>\n                <Modal.Body>\n                    <h6> Your Session has expired!</h6>\n                    <div className=\"d-flex justify-content-between\">\n                        <button className=\"btn btn-light\" onClick={()=>{setShowSessionEndedModal(false)}}>\n                            Close\n                        </button>\n\n                        <button className=\"btn btn-success\" onClick={()=>{navigate('/login')}}>\n                            Login\n                        </button>\n                    </div>\n                </Modal.Body>\n            </Modal>\n            \n            \n        </div>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}