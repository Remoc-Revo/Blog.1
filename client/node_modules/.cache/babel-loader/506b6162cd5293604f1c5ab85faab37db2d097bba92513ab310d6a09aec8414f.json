{"ast":null,"code":"var _jsxFileName = \"/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UseUserContext } from \"../userContext\";\nimport api from \"../config/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const navigate = useNavigate();\n  var [email, set_email] = useState();\n  var [password, set_password] = useState();\n  var [errorMessage, set_errorMessage] = useState();\n  const {\n    user,\n    contextLogin\n  } = UseUserContext();\n  const [isValidating, setIsValidating] = useState(false);\n  function login(e) {\n    e.preventDefault();\n    set_errorMessage();\n    setIsValidating(true);\n    api.post('/login', {\n      withCredentials: true,\n      email: email,\n      password: password\n    }).then(response => {\n      if (response && response.status === 200) {\n        var _window$history;\n        contextLogin(response.data);\n        console.log(\"user after login \", user);\n        setIsValidating(false);\n        if ((_window$history = window.history) !== null && _window$history !== void 0 && _window$history.length && window.history.length > 2 && response.data.userLevel === 0) {\n          console.log(\"why can't w go forward\");\n          navigate(-1, {\n            replace: true\n          });\n        } else {\n          navigate(\"/\", {\n            replace: true\n          });\n        }\n      }\n    }).catch(err => {\n      // document.write(err)\n      setIsValidating(false);\n      if (err.response && err.response.status === 401) {\n        set_errorMessage(\"Invalid email or password\");\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-page \",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"auth-form\",\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"\",\n          src: require(\"../logos/logo.png\"),\n          style: {\n            width: \"48%\"\n          },\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: login,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"col-md-12\",\n          type: \"text\",\n          name: \"email\",\n          placeholder: \"email\",\n          required: true,\n          value: email,\n          onChange: e => {\n            set_email(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"col-md-12\",\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"password\",\n          required: true,\n          value: password,\n          onChange: e => {\n            set_password(e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"red\"\n          },\n          children: errorMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"col-md-12 btn-submit\",\n          id: \"\",\n          type: \"submit\",\n          children: isValidating ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner-border text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sr-only\",\n              children: \"Validating...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          style: {\n            fontSize: \"13px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/register\",\n            className: \"text-decoration-none\",\n            children: \"Sign up\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/resetPassword/null\",\n            className: \"text-decoration-none\",\n            children: \"Forgot  password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 28\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 12\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 8\n  }, this);\n}\n_s(Login, \"S8+9pD3ntR1rpnDWWHFg7gvR+p0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","UseUserContext","api","jsxDEV","_jsxDEV","Login","_s","navigate","email","set_email","password","set_password","errorMessage","set_errorMessage","user","contextLogin","isValidating","setIsValidating","login","e","preventDefault","post","withCredentials","then","response","status","_window$history","data","console","log","window","history","length","userLevel","replace","catch","err","className","children","id","src","require","style","width","alt","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","name","placeholder","required","value","onChange","target","color","fontSize","href","_c","$RefreshReg$"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/login.jsx"],"sourcesContent":["import React,{useState} from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { UseUserContext } from \"../userContext\";\nimport api from \"../config/api\";\n\n\nexport default function Login(){\n   const navigate=useNavigate();\n   var [email,set_email]=useState();\n   var [password,set_password]=useState();\n   var [errorMessage,set_errorMessage]=useState();\n   const {user,contextLogin} = UseUserContext();\n   const [isValidating, setIsValidating] = useState(false);\n\n   function login(e){\n       e.preventDefault();\n       set_errorMessage();\n       setIsValidating(true);\n\n       api.post('/login',\n           {\n               withCredentials:true,\n               email:email,\n               password:password\n           })\n           .then((response)=>{\n               if(response && response.status===200){\n                   contextLogin(response.data);\n                   console.log(\"user after login \",user);\n                   setIsValidating(false);\n\n                   if( window.history?.length\n                       && window.history.length > 2\n                       && response.data.userLevel === 0){\n                           console.log(\"why can't w go forward\")\n                        navigate(-1,{replace:true});\n                   }\n                   else{\n                       navigate(\"/\",{replace:true});\n                   }\n               }\n           })\n           .catch((err)=>{\n               // document.write(err)\n               setIsValidating(false);\n               if(err.response && err.response.status===401){\n                   set_errorMessage(\"Invalid email or password\")\n               }\n           });\n   }\n   return(\n       <div className=\"auth-page \">\n\n           <div id=\"auth-form\" className=\"d-flex flex-column\">\n               <div className=\"d-flex justify-content-center\">\n                   <img className=\"\" src={require(\"../logos/logo.png\")} style={{width:\"48%\"}} alt=\"\"/>\n                   \n               </div>\n               <form onSubmit={login} >\n                 \n                       <input className=\"col-md-12\" type=\"text\" name=\"email\" placeholder=\"email\" required\n                               value={email} onChange={(e)=>{set_email(e.target.value)}}\n                       />\n\n                       \n                       <input className=\"col-md-12\" type=\"password\" name=\"password\" placeholder=\"password\" required\n                           value={password} onChange={(e)=>{set_password(e.target.value)}}\n                       />\n                   \n                   <p style={{color:\"red\"}}>{errorMessage}</p>\n                   <button className=\"col-md-12 btn-submit\" id=\"\" type=\"submit\">\n                       {\n                           isValidating\n                           ?<div className=\"spinner-border text-white\">\n                               <span className=\"sr-only\">Validating...</span>\n                           </div>\n                           :<span>Login</span>\n                       }\n                   </button>\n\n                   <div className=\"d-flex justify-content-between\" style={{fontSize:\"13px\"}}>\n                           <a href=\"/register\" className=\"text-decoration-none\">Sign up</a>\n                           <a href=\"/resetPassword/null\" className=\"text-decoration-none\" >\n                               Forgot  password\n                           </a>\n                   </div>\n                   \n               </form>\n           </div>\n       </div>\n       \n   )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}