{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useUserContext}from\"../userContext\";import api from\"../config/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const navigate=useNavigate();var[email,set_email]=useState();var[password,set_password]=useState();var[errorMessage,set_errorMessage]=useState();const{user,contextLogin}=useUserContext();const[isValidating,setIsValidating]=useState(false);function login(e){e.preventDefault();set_errorMessage();setIsValidating(true);api.post('/login',{withCredentials:true,email:email,password:password}).then(response=>{if(response&&response.status===200){var _window$history;contextLogin(response.data);console.log(\"user after login \",user);setIsValidating(false);if((_window$history=window.history)!==null&&_window$history!==void 0&&_window$history.length&&window.history.length>2&&response.data.userLevel===0){console.log(\"why can't w go forward\");navigate(-1,{replace:true});}else{navigate(\"/\",{replace:true});}}}).catch(err=>{// document.write(err)\nsetIsValidating(false);if(err.response&&err.response.status===401){set_errorMessage(\"Invalid email or password\");}});}return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page \",children:/*#__PURE__*/_jsxs(\"div\",{id:\"auth-form\",className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"img\",{className:\"\",src:require(\"../logos/logo.png\"),style:{width:\"48%\"},alt:\"\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:login,children:[/*#__PURE__*/_jsx(\"input\",{className:\"col-md-12\",type:\"text\",name:\"email\",placeholder:\"email\",required:true,value:email,onChange:e=>{set_email(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"col-md-12\",type:\"password\",name:\"password\",placeholder:\"password\",required:true,value:password,onChange:e=>{set_password(e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"col-md-12 btn-submit\",id:\"\",type:\"submit\",children:isValidating?/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-white\",children:/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Validating...\"})}):/*#__PURE__*/_jsx(\"span\",{children:\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",style:{fontSize:\"13px\"},children:[/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"text-decoration-none\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/resetPassword/null\",className:\"text-decoration-none\",children:\"Forgot  password\"})]})]})]})});}","map":{"version":3,"names":["React","useState","useNavigate","useUserContext","api","jsx","_jsx","jsxs","_jsxs","Login","navigate","email","set_email","password","set_password","errorMessage","set_errorMessage","user","contextLogin","isValidating","setIsValidating","login","e","preventDefault","post","withCredentials","then","response","status","_window$history","data","console","log","window","history","length","userLevel","replace","catch","err","className","children","id","src","require","style","width","alt","onSubmit","type","name","placeholder","required","value","onChange","target","color","fontSize","href"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/pages/login.jsx"],"sourcesContent":["import React,{useState} from \"react\";\n import { useNavigate } from \"react-router-dom\";\n import { useUserContext } from \"../userContext\";\n import api from \"../config/api\";\n \n \n export default function Login(){\n     const navigate=useNavigate();\n     var [email,set_email]=useState();\n     var [password,set_password]=useState();\n     var [errorMessage,set_errorMessage]=useState();\n     const {user,contextLogin} = useUserContext();\n     const [isValidating, setIsValidating] = useState(false);\n \n     function login(e){\n         e.preventDefault();\n         set_errorMessage();\n         setIsValidating(true);\n \n         api.post('/login',\n             {\n                 withCredentials:true,\n                 email:email,\n                 password:password\n             })\n             .then((response)=>{\n                 if(response && response.status===200){\n                     contextLogin(response.data);\n                     console.log(\"user after login \",user);\n                     setIsValidating(false);\n \n                     if( window.history?.length\n                         && window.history.length > 2\n                         && response.data.userLevel === 0){\n                             console.log(\"why can't w go forward\")\n                          navigate(-1,{replace:true});\n                     }\n                     else{\n                         navigate(\"/\",{replace:true});\n                     }\n                 }\n             })\n             .catch((err)=>{\n                 // document.write(err)\n                 setIsValidating(false);\n                 if(err.response && err.response.status===401){\n                     set_errorMessage(\"Invalid email or password\")\n                 }\n             });\n     }\n     return(\n         <div className=\"auth-page \">\n \n             <div id=\"auth-form\" className=\"d-flex flex-column\">\n                 <div className=\"d-flex justify-content-center\">\n                     <img className=\"\" src={require(\"../logos/logo.png\")} style={{width:\"48%\"}} alt=\"\"/>\n                     \n                 </div>\n                 <form onSubmit={login} >\n                   \n                         <input className=\"col-md-12\" type=\"text\" name=\"email\" placeholder=\"email\" required\n                                 value={email} onChange={(e)=>{set_email(e.target.value)}}\n                         />\n \n                         \n                         <input className=\"col-md-12\" type=\"password\" name=\"password\" placeholder=\"password\" required\n                             value={password} onChange={(e)=>{set_password(e.target.value)}}\n                         />\n                     \n                     <p style={{color:\"red\"}}>{errorMessage}</p>\n                     <button className=\"col-md-12 btn-submit\" id=\"\" type=\"submit\">\n                         {\n                             isValidating\n                             ?<div className=\"spinner-border text-white\">\n                                 <span className=\"sr-only\">Validating...</span>\n                             </div>\n                             :<span>Login</span>\n                         }\n                     </button>\n \n                     <div className=\"d-flex justify-content-between\" style={{fontSize:\"13px\"}}>\n                             <a href=\"/register\" className=\"text-decoration-none\">Sign up</a>\n                             <a href=\"/resetPassword/null\" className=\"text-decoration-none\" >\n                                 Forgot  password\n                             </a>\n                     </div>\n                     \n                 </form>\n             </div>\n         </div>\n         \n     )\n }\n "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}