{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useNavigate}from\"react-router-dom\";import api from\"../config/api\";import{useUserContext}from\"../userContext\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faStar,faReply,faUser}from\"@fortawesome/free-solid-svg-icons\";import{faStar as farStar}from\"@fortawesome/free-regular-svg-icons\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Comments=/*#__PURE__*/React.memo(_ref=>{let{articleId}=_ref;const navigate=useNavigate();let[newComment,set_newComment]=useState();let[comments,set_comments]=useState();let[newReply,set_newReply]=useState('');let[activeButtonKey,set_activeButtonKey]=useState(-1);let[likes,set_likes]=useState();let[userId,setUserId]=useState();let[userName,setUserName]=useState();let[userProfilePhoto,setUserProfilePhoto]=useState(null);const{loading,user}=useUserContext();const fetchComments=useCallback(()=>{api.get(\"/comments/\".concat(articleId),{withCredentials:true}).then(response=>{set_likes(response.data.likes);set_comments(response.data.comments);});},[articleId]);useEffect(()=>{fetchComments();if(!loading&&user!=null){console.log(\"user context!!!!\",user);setUserId(user.userId);setUserName(user.userName);setUserProfilePhoto(user.userProfilePhoto);}},[fetchComments,articleId,loading,user]);const handleReplyButtonClick=(e,key)=>{e.stopPropagation();set_newReply('');set_activeButtonKey(key);};const handleOutsideClick=()=>{set_activeButtonKey(-1);};const handleInputClick=e=>{e.stopPropagation();};const updateLikes=updatedLikes=>{set_likes(updatedLikes);};function addComment(e){e.preventDefault();api.post('/addComment',{withCredentials:true,comment:newComment,articleId:articleId}).then(response=>{if(response.status===201){set_newComment('');fetchComments();}}).catch(err=>{console.log(\"the errr\",err.response.status);if(err.response.status===401){navigate('/login');}});}function sendReply(parentId){if(newReply==='')return;api.post('/reply',{articleId:articleId,parentId:parentId,reply:newReply}).then(response=>{if(response.status===201){fetchComments();}});}function checkLogin(){return userId===undefined&&window.alert('Login to add comment');}return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",onClick:handleOutsideClick,children:[/*#__PURE__*/_jsx(\"hr\",{}),typeof comments!=='undefined'&&/*#__PURE__*/_jsx(\"div\",{className:\"col-12  text-start\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"\".concat(comments.length,\" \").concat(comments.length===1?\"Comment\":\"Comments\")})}),comments!==undefined?/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:comments.map(comment=>{return/*#__PURE__*/_jsx(Comment,{articleId:articleId,comment:comment,newReply:newReply,set_newReply:set_newReply,sendReply:sendReply,handleReplyButtonClick:handleReplyButtonClick,handleInputClick:handleInputClick,updateLikes:updateLikes,activeButtonKey:activeButtonKey,likes:likes,userId:userId,userName:userName,userProfilePhoto:userProfilePhoto},comment.commentId);})},\"comments\"):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(\"label\",{className:\"mt-4 mb-1\",children:\"Leave a comment\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addComment,className:\"border\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"col-12 p-3 mb-0\",rows:5,placeholder:\"Write a comment...\",onInput:checkLogin,value:newComment,onChange:e=>set_newComment(e.target.value),required:true,style:{border:\"none\",borderBottom:\"1px solid lightgrey\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end m-0 p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Comment\",className:\"btn rounded-0 m-2\",style:{border:\"1px solid lightgrey\"}})})]})]});});function Comment(_ref2){let{articleId,comment,sendReply,newReply,set_newReply,handleReplyButtonClick,handleInputClick,updateLikes,activeButtonKey,likes,userId,userName,userProfilePhoto}=_ref2;const key=comment.commentId;function likeSum(commentId,value){let sum=0;for(var like of likes){if(like.commentId===commentId&&like.value===value)sum++;}return sum>0?sum:'';}const hasLiked=commentId=>{for(let like of likes){if(like.commentId===commentId&&like.value===1&&userId===like.userId){return true;}}return false;};const hasReplied=()=>{return comment.replies&&comment.replies.some(reply=>{return userId===reply.userId;});};function loginAlert(){return window.alert(\"You need to login first to respond to this post\");}function formatDateTime(date){date=new Date(date);let hours=date.getHours();let minutes=date.getMinutes();const ampm=hours>12?'pm':'am';hours=hours%12;hours=hours?hours:12;//convert hour '0' to 12\nminutes=minutes<10?'0'+minutes:minutes;const timeStr=hours+':'+minutes+' '+ampm;const dateStr=new Intl.DateTimeFormat('en-US',{month:'long',day:'numeric',year:'numeric'}).format(date);const dateTimeStr=dateStr+' at '+timeStr;return dateTimeStr;}function like(articleId,commentId){api.post('/like',{commentId:commentId,articleId:articleId}).then(response=>{updateLikes(response.data.updatedLikes);}).catch(err=>{console.log(err);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"pt-2 d-flex gap-3 \".concat(comment.parentCommentId===null?'border-bottom':''),id:\"comment\".concat(comment.commentId),children:[/*#__PURE__*/_jsx(\"div\",{children:comment.commenterProfilePhoto!==null?/*#__PURE__*/_jsx(\"div\",{style:{width:\"40px\",height:\"40px\"},children:/*#__PURE__*/_jsx(\"img\",{src:comment.commenterProfilePhoto,className:\"rounded-circle w-100 h-100 object-fit-cover\",alt:\"\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle overflow-hidden\",style:{width:\"40px\",height:\"40px\",backgroundColor:\"lightgrey\"},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser,className:\"ic-white rounded-circle w-100 h-100 pt-2\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\" d-flex flex-column gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"400\",fontSize:\"12px\"},children:comment.comment_userName.toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"\",style:{color:\"grey\",fontSize:\"11px\"},children:formatDateTime(comment.dateAdded)}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",style:{fontWeight:\"300\",fontSize:\"12px\"},children:comment.comment}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn border-0 no-focus-outline\",onClick:userId===undefined?()=>loginAlert():()=>like(articleId,key),title:\"Like\",children:[hasLiked(comment.commentId)?/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faStar,className:\"ic-response ic-teal\"}):/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:farStar,className:\"ic-response ic-grey\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon-label\",children:likeSum(key,1)})]})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:userId===undefined?()=>loginAlert():e=>handleReplyButtonClick(e,key),title:\"Reply\",children:[hasReplied()?/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faReply,className:\"ic-response ic-teal\"}):/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faReply,className:\"ic-grey ic-response\"}),/*#__PURE__*/_jsx(\"span\",{className:\"icon-label\",children:comment.replies&&comment.replies.length})]})]}),activeButtonKey===key&&userName!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 \",children:[/*#__PURE__*/_jsx(\"div\",{children:userProfilePhoto!==null?/*#__PURE__*/_jsx(\"div\",{style:{width:\"50px\",height:\"50px\"},children:/*#__PURE__*/_jsx(\"img\",{src:userProfilePhoto,className:\"rounded-circle w-100 h-100 object-fit-cover\",alt:\"\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"rounded-circle overflow-hidden\",style:{width:\"50px\",height:\"50px\",backgroundColor:\"lightgrey\"},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser,className:\"ic-white rounded-circle w-100 h-100 pt-2\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2 fw-bolder \",children:userName}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 col-12 mb-1\",children:[/*#__PURE__*/_jsx(\"textarea\",{rows:2,className:\"col-12 p-2 \",value:newReply,onChange:e=>set_newReply(e.target.value),onClick:handleInputClick},['reply',key].join('_')),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-light\",onClick:()=>sendReply(comment.commentId),children:\"send\"})]})]}),comment.replies&&comment.replies.map(reply=>{return/*#__PURE__*/_jsx(Comment,{articleId:articleId,comment:reply,newReply:newReply,set_newReply:set_newReply,sendReply:sendReply,handleReplyButtonClick:handleReplyButtonClick,handleInputClick:handleInputClick,updateLikes:updateLikes,activeButtonKey:activeButtonKey,likes:likes,userId:userId,userName:userName,userProfilePhoto:userProfilePhoto},reply.commentId);})]})]})]});}export default Comments;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","api","useUserContext","FontAwesomeIcon","faStar","faReply","faUser","farStar","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Comments","memo","_ref","articleId","navigate","newComment","set_newComment","comments","set_comments","newReply","set_newReply","activeButtonKey","set_activeButtonKey","likes","set_likes","userId","setUserId","userName","setUserName","userProfilePhoto","setUserProfilePhoto","loading","user","fetchComments","get","concat","withCredentials","then","response","data","console","log","handleReplyButtonClick","e","key","stopPropagation","handleOutsideClick","handleInputClick","updateLikes","updatedLikes","addComment","preventDefault","post","comment","status","catch","err","sendReply","parentId","reply","checkLogin","undefined","window","alert","className","onClick","children","length","map","Comment","commentId","onSubmit","rows","placeholder","onInput","value","onChange","target","required","style","border","borderBottom","type","_ref2","likeSum","sum","like","hasLiked","hasReplied","replies","some","loginAlert","formatDateTime","date","Date","hours","getHours","minutes","getMinutes","ampm","timeStr","dateStr","Intl","DateTimeFormat","month","day","year","format","dateTimeStr","parentCommentId","id","commenterProfilePhoto","width","height","src","alt","backgroundColor","icon","fontWeight","fontSize","comment_userName","toUpperCase","color","dateAdded","title","join"],"sources":["/home/remoc-revo/Desktop/git_repo/Blog.1/client/src/components/comments.jsx"],"sourcesContent":["import React,{useState,useEffect, useCallback} from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../config/api\";\nimport { useUserContext } from \"../userContext\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faStar, faReply,faUser } from \"@fortawesome/free-solid-svg-icons\";\nimport  { faStar as farStar} from \"@fortawesome/free-regular-svg-icons\";\n\nconst Comments=React.memo(({articleId})=>{\n    const navigate=useNavigate();\n    let [newComment,set_newComment]=useState();\n    let [comments,set_comments]=useState();\n    let [newReply,set_newReply]=useState('');\n    let [activeButtonKey,set_activeButtonKey]=useState(-1);\n    let [likes,set_likes]=useState();\n    let [userId, setUserId]=useState();\n    let [userName, setUserName] = useState();\n    let [userProfilePhoto, setUserProfilePhoto] = useState(null);\n    const {loading,user} = useUserContext();\n\n\n    const fetchComments = useCallback(()=>{\n        api.get(`/comments/${articleId}`,{withCredentials:true})\n            .then((response)=>{\n            set_likes(response.data.likes)\n            set_comments(response.data.comments);\n            }) \n    },[articleId] )      \n\n    useEffect(()=>{\n        fetchComments();\n        \n        if(!loading && user != null){\n            console.log(\"user context!!!!\",user);\n            setUserId(user.userId);\n            setUserName(user.userName);\n            setUserProfilePhoto(user.userProfilePhoto);\n        }\n    },[fetchComments,articleId,loading,user])\n    \n    const handleReplyButtonClick=(e,key)=>{\n        e.stopPropagation();\n        set_newReply('');\n        set_activeButtonKey(key)\n    }\n\n    const handleOutsideClick=()=>{\n        set_activeButtonKey(-1);\n    }\n\n    const handleInputClick=(e)=>{\n        e.stopPropagation();\n    }\n\n    const updateLikes = (updatedLikes)=>{\n        set_likes(updatedLikes);\n    }\n\n\n    function addComment(e){\n        e.preventDefault();\n        \n        api.post('/addComment',\n             {\n                withCredentials:true,\n                comment:newComment,\n                articleId:articleId\n            })\n             .then((response)=>{\n                if(response.status===201){\n                    set_newComment('');\n                    fetchComments();\n                }\n             })\n             .catch((err)=>{\n                console.log(\"the errr\",err.response.status)\n                if(err.response.status===401){\n                    navigate('/login');\n                }\n             })\n    }\n\n    function sendReply(parentId){\n        if(newReply === '') return;\n\n        api.post('/reply',\n            {\n                articleId:articleId,\n                parentId: parentId,\n                reply: newReply\n            })\n            .then((response)=>{\n                if(response.status===201){\n                    fetchComments();\n                }\n            })\n            \n\n    }\n\n    function checkLogin(){\n        return (userId === undefined) && window.alert('Login to add comment');\n    }\n\n\n\n    return(\n        <div className=\"mb-4\" onClick={handleOutsideClick}>\n            <hr/>\n\n            {typeof comments!=='undefined' && \n            <div className=\"col-12  text-start\">\n                <h5>{`${comments.length} ${(comments.length === 1) ? \"Comment\" : \"Comments\"}`}</h5>\n            </div>}\n\n            \n            {(comments!==undefined)\n                ?<div className=\"mt-4\" key=\"comments\">\n                    {\n                        comments.map(comment=>{\n                            return <Comment articleId={articleId}\n                                            comment={comment} \n                                            key={comment.commentId}\n                                            newReply={newReply} \n                                            set_newReply={set_newReply}\n                                            sendReply={sendReply}\n                                            handleReplyButtonClick={handleReplyButtonClick}\n                                            handleInputClick={handleInputClick}\n                                            updateLikes = {updateLikes}\n                                            activeButtonKey={activeButtonKey}\n                                            likes={likes}\n                                            userId={userId}\n                                            userName={userName}\n                                            userProfilePhoto = {userProfilePhoto}\n                                    />\n                        })\n                    }\n                \n                </div>\n\n                :<></>\n            }\n\n            <label className=\"mt-4 mb-1\">Leave a comment</label>\n            <form onSubmit={addComment} className=\"border\">\n                <textarea className=\"col-12 p-3 mb-0\" rows={5} \n                    placeholder=\"Write a comment...\" onInput={checkLogin}\n                    value={newComment} onChange={(e)=>set_newComment(e.target.value)} required\n                    style={{border:\"none\",borderBottom:\"1px solid lightgrey\"}}\n                    />\n                \n                <div className=\"d-flex justify-content-end m-0 p-0\">\n                    <input type=\"submit\" value=\"Comment\" className=\"btn rounded-0 m-2\" \n                        style={{border:\"1px solid lightgrey\"}}\n                    />\n                </div>\n                \n            </form>\n            \n        </div>\n    )\n})\n\nfunction Comment({\n        articleId,\n        comment,\n        sendReply,\n        newReply,\n        set_newReply,\n        handleReplyButtonClick,\n        handleInputClick,\n        updateLikes,\n        activeButtonKey,\n        likes,\n        userId,\n        userName,\n        userProfilePhoto\n    }){\n    const key=comment.commentId;\n\n    function likeSum(commentId,value){\n        let sum=0;\n        for(var like of likes){\n            if(like.commentId===commentId && like.value===value) sum++;\n        }\n        return (sum>0) ? sum : '';\n    }\n\n    const hasLiked = (commentId)=>{\n        for(let like of likes){\n            if(like.commentId === commentId  && like.value === 1 && userId === like.userId){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    const hasReplied = ()=>{ \n        return comment.replies && comment.replies.some((reply)=>{\n            return userId === reply.userId\n              \n        });        \n    }\n\n    function loginAlert(){\n        return window.alert(`You need to login first to respond to this post`);\n    }\n\n    function formatDateTime(date){\n        date = new Date(date);\n        let hours = date.getHours();\n        let minutes = date.getMinutes();\n        const ampm = hours > 12 ? 'pm' : 'am';\n        hours = hours % 12;\n        hours = hours ? hours : 12; //convert hour '0' to 12\n        minutes = minutes <  10 ? '0' + minutes : minutes;\n\n        const timeStr = hours + ':' + minutes + ' ' + ampm;\n        const dateStr =   new Intl.DateTimeFormat('en-US',{month:'long',day:'numeric',year:'numeric'}).format(date);\n        const dateTimeStr = dateStr + ' at ' + timeStr;\n\n\n        return dateTimeStr;\n\n      }\n\n      function like(articleId,commentId){\n        api.post('/like',{commentId:commentId, articleId : articleId})\n             .then((response)=>{\n                updateLikes(response.data.updatedLikes);\n             })\n             .catch((err)=>{\n                console.log(err);\n             })\n    }\n    \n\n    return(\n        <div className={`pt-2 d-flex gap-3 ${(comment.parentCommentId === null) ? 'border-bottom':''}`}\n            id={`comment${comment.commentId}`}\n            >\n            <div>\n                {\n                    (comment.commenterProfilePhoto !== null)\n                    ?<div style={{width:\"40px\",height:\"40px\"}}>                                                                                           \n                        <img src={comment.commenterProfilePhoto}\n                            className=\"rounded-circle w-100 h-100 object-fit-cover\"\n                            alt=\"\"\n                        />\n                    </div>\n\n                    :<div className=\"rounded-circle overflow-hidden\" \n                        style={{width:\"40px\",height:\"40px\", backgroundColor:\"lightgrey\"}}>\n                        <FontAwesomeIcon icon={faUser} className=\"ic-white rounded-circle w-100 h-100 pt-2\"/>\n                    </div>\n                }\n\n            </div>\n            \n            <div className=\" d-flex flex-column gap-1\">\n                <span style={{fontWeight:\"400\",fontSize:\"12px\"}}>{comment.comment_userName.toUpperCase()}</span>\n\n                <span className=\"\" style={{color:\"grey\",fontSize:\"11px\"}}>{formatDateTime(comment.dateAdded)}</span>\n\n                <p className=\"mt-3\" style={{fontWeight:\"300\",fontSize:\"12px\"}}>{comment.comment}</p>\n                <div className=\"\">\n                    <div className=\"d-flex\">\n                       <div className=\"\">\n                            <button className=\"btn border-0 no-focus-outline\" onClick={(userId === undefined) ? ()=>loginAlert() : ()=>like(articleId,key)} title=\"Like\">\n                                {hasLiked(comment.commentId)\n                                    ?<FontAwesomeIcon icon={faStar} className=\"ic-response ic-teal\"/>\n                                    :<FontAwesomeIcon icon={farStar} className=\"ic-response ic-grey\"/>\n                                }\n                                <span className=\"icon-label\">{likeSum(key,1)}</span>\n                            </button>\n                        </div>\n                        \n                        <button className=\"btn\" onClick={(userId === undefined) ? ()=>loginAlert() : (e)=>handleReplyButtonClick(e,key)} title=\"Reply\">\n                            {hasReplied()\n                                ?<FontAwesomeIcon icon={faReply} className=\"ic-response ic-teal\" />\n                                :<FontAwesomeIcon icon={faReply} className=\"ic-grey ic-response\" />\n                            }\n                            \n                            <span className=\"icon-label\">{comment.replies && comment.replies.length}</span>\n                        </button> \n                    </div>\n                    \n                    {\n                        (activeButtonKey===key) && (userName !== undefined) && (\n                            <div className=\"mt-3 \">\n                                 <div>\n                                    {\n                                        (userProfilePhoto !== null)\n                                        ?<div style={{width:\"50px\",height:\"50px\"}}>                                                                                           \n                                            <img src={userProfilePhoto}\n                                                className=\"rounded-circle w-100 h-100 object-fit-cover\"\n                                                alt=\"\"\n                                            />\n                                        </div>\n\n                                        :<div className=\"rounded-circle overflow-hidden\" \n                                            style={{width:\"50px\",height:\"50px\", backgroundColor:\"lightgrey\"}}>\n                                            <FontAwesomeIcon icon={faUser} className=\"ic-white rounded-circle w-100 h-100 pt-2\"/>\n                                        </div>\n                                    }\n\n                                </div>\n                                <span className=\"ms-2 fw-bolder \">{userName}</span>\n\n                                <div className=\"mt-2 col-12 mb-1\">\n                                    <textarea rows={2} className=\"col-12 p-2 \" key={['reply',key].join('_')} value={newReply} onChange={(e)=>set_newReply(e.target.value)}   onClick={handleInputClick} />\n                                    <button className=\"btn btn-light\" onClick={()=>sendReply(comment.commentId)}>send</button>                                  \n                                </div>\n                            </div>\n                        )\n                    }\n\n                    {\n                        comment.replies && comment.replies.map(reply=>{\n                            \n                            return <Comment articleId={articleId}\n                                            comment={reply} \n                                            key={reply.commentId} \n                                            newReply={newReply} \n                                            set_newReply={set_newReply}\n                                            sendReply={sendReply}\n                                            handleReplyButtonClick={handleReplyButtonClick}\n                                            handleInputClick={handleInputClick}\n                                            updateLikes = {updateLikes}\n                                            activeButtonKey={activeButtonKey}\n                                            likes={likes}\n                                            userId={userId}\n                                            userName={userName}\n                                            userProfilePhoto={userProfilePhoto}\n                                    />\n\n                        })\n                    }\n                \n                </div>\n            </div>\n            \n        </div>\n\n    )\n}\n\n\n\n\n\nexport default Comments;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}